<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2025-03-12" />
  <title>discrete_gauge_theory.tikzimg</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Libre+Baskerville&family=Quattrocento:wght@400">
  <style>
  body {
    font-family: Baskerville, 'Libre Baskerville', serif;
  }
  h1, h2, h3, h4, h5, h6, .abstract-title {
    font-family: Quattrocento, sans-serif;
    font-weight: bold;
    text-align: center;
  }
  img {
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
  </style>
  <p><span class="math inline">\(\newcommand{\textesh}{∫}\)</span> <span class="math inline">\(\newcommand{\ensuremath}{}\)</span></p>
  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#abstract" id="toc-abstract">Abstract</a></li>
<li><a href="#overview" id="toc-overview"><span class="toc-section-number">1</span> Overview</a></li>
<li><a href="#sec:torsors" id="toc-sec:torsors"><span class="toc-section-number">2</span> Torsors and principal bundles</a>
<ul>
<li><a href="#subsec:torsors" id="toc-subsec:torsors"><span class="toc-section-number">2.1</span> Torsors</a></li>
<li><a href="#bundles-of-eilenberg-mac-lane-spaces" id="toc-bundles-of-eilenberg-mac-lane-spaces"><span class="toc-section-number">2.2</span> Bundles of Eilenberg-Mac Lane spaces</a></li>
<li><a href="#sec:pathovers" id="toc-sec:pathovers"><span class="toc-section-number">2.3</span> Pathovers</a></li>
<li><a href="#sec:automorphisms" id="toc-sec:automorphisms"><span class="toc-section-number">2.4</span> The bundle of automorphisms</a></li>
</ul></li>
<li><a href="#sec:discrete_man" id="toc-sec:discrete_man"><span class="toc-section-number">3</span> Discrete manifolds</a>
<ul>
<li><a href="#abstract-simplicial-complexes" id="toc-abstract-simplicial-complexes"><span class="toc-section-number">3.1</span> Abstract simplicial complexes</a></li>
<li><a href="#higher-inductive-combinatorial-manifolds" id="toc-higher-inductive-combinatorial-manifolds"><span class="toc-section-number">3.2</span> Higher inductive combinatorial manifolds</a></li>
<li><a href="#sec:polygons" id="toc-sec:polygons"><span class="toc-section-number">3.3</span> Polygons</a></li>
<li><a href="#the-octahedron-model-of-the-sphere" id="toc-the-octahedron-model-of-the-sphere"><span class="toc-section-number">3.4</span> The octahedron model of the sphere</a></li>
</ul></li>
<li><a href="#sec:connections" id="toc-sec:connections"><span class="toc-section-number">4</span> Bundles, connections, and curvature</a>
<ul>
<li><a href="#definitions" id="toc-definitions"><span class="toc-section-number">4.1</span> Definitions</a></li>
<li><a href="#sec:localtriv" id="toc-sec:localtriv"><span class="toc-section-number">4.2</span> Flat connections as local trivializations</a></li>
<li><a href="#the-tangent-bundle-of-the-sphere" id="toc-the-tangent-bundle-of-the-sphere"><span class="toc-section-number">4.3</span> The tangent bundle of the sphere</a></li>
<li><a href="#existence-of-connections" id="toc-existence-of-connections"><span class="toc-section-number">4.4</span> Existence of connections</a></li>
</ul></li>
<li><a href="#sec:vector_fields" id="toc-sec:vector_fields"><span class="toc-section-number">5</span> Vector fields</a>
<ul>
<li><a href="#definition" id="toc-definition"><span class="toc-section-number">5.1</span> Definition</a></li>
<li><a href="#swirling-of-dependent-paths" id="toc-swirling-of-dependent-paths"><span class="toc-section-number">5.2</span> Swirling of dependent paths</a></li>
<li><a href="#an-example-vector-field-on-the-sphere" id="toc-an-example-vector-field-on-the-sphere"><span class="toc-section-number">5.3</span> An example vector field on the sphere</a></li>
</ul></li>
<li><a href="#sec:totals" id="toc-sec:totals"><span class="toc-section-number">6</span> The total construction</a>
<ul>
<li><a href="#index-of-the-vector-field" id="toc-index-of-the-vector-field"><span class="toc-section-number">6.1</span> Index of the vector field</a></li>
<li><a href="#total-curvature-and-index-on-the-sphere" id="toc-total-curvature-and-index-on-the-sphere"><span class="toc-section-number">6.2</span> Total curvature and index on the sphere</a></li>
<li><a href="#future-directions" id="toc-future-directions"><span class="toc-section-number">6.3</span> Future directions</a></li>
</ul></li>
</ul>
</nav>
<h1 class="unnumbered" id="abstract">Abstract</h1>
<p>Type families on higher inductive types such as pushouts can capture the homotopical properties of differential geometric constructions including connections, curvature, gauge transformations, and vector fields. We define a class of combinatorial pushouts, then define principal bundles, connections, and curvature on these. We provide an example of a tangent bundle but do not prove when these must exist. We draw inspiration in part from the young field of discrete differential geometry, and in part from the original classical proofs, which often make use of triangulations and other discrete arguments. We prove an equality relating the Gauss-Bonnet theorem to the Poincaré-Hopf theorem. We also attempt to map out future directions.</p>
<p><em></em></p>
<p>This thesis is dedicated to John Baez, Sean M. Carroll, Sabine Hossenfelder, and other communicators who are carrying the torch of science forward in the spirit of my hero Carl Sagan. I have followed you all for many years, and you have inspired me to continue my studies alongside my career. Thank you.</p>
<blockquote>
<p>“It is always ourselves we work on, whether we realize it or not. There is no other work to be done in the world.” — Stephen Talbott, <em>The Future Does Not Compute</em><span class="citation" data-cites="talbott"> (<a href="#ref-talbott" role="doc-biblioref">Talbott, 1995</a>)</span></p>
</blockquote>
<h1 data-number="1" id="overview"><span class="header-section-number">1</span> Overview</h1>
<p>The outline is that we will define</p>
<ul>
<li><p>principal bundles in Section <a href="#sec:torsors" data-reference-type="ref" data-reference="sec:torsors">2</a>,</p></li>
<li><p>simplicial complexes, and homotopical realizations of these in Section <a href="#sec:discrete_man" data-reference-type="ref" data-reference="sec:discrete_man">3</a>,</p></li>
<li><p>vector fields in Section <a href="#sec:vector_fields" data-reference-type="ref" data-reference="sec:vector_fields">5</a>,</p></li>
</ul>
<p>and observe emerging from those definitions the presence of</p>
<ul>
<li><p>connections and curvature in Section <a href="#sec:connections" data-reference-type="ref" data-reference="sec:connections">4</a>,</p></li>
<li><p>the index of a vector field in Section <a href="#sec:totals" data-reference-type="ref" data-reference="sec:totals">6</a>,</p></li>
</ul>
<p>and then define in Section <a href="#sec:totals" data-reference-type="ref" data-reference="sec:totals">6</a></p>
<ul>
<li><p>the total curvature, as in the Gauss-Bonnet theorem</p></li>
<li><p>the total index of a vector field, as in Poincaré-Hopf theorem,</p></li>
<li><p>and prove the equality of these to each other.</p></li>
</ul>
<p>We will build up an example of all of these structures on an octahedron model of the sphere, and compute its Euler characteristic of 2. We will not, however, be supplying a separate definition of Euler characteristic so as to truly reproduce the Gauss-Bonnet and Poincaré-Hopf theorems.</p>
<p>Once we have defined homotopical realizations of simplicial complexes in Section <a href="#sec:discrete_man" data-reference-type="ref" data-reference="sec:discrete_man">3</a>, we will focus in most of this note on dimensions 1 and 2. In dimension 1 we obtain polygons, which we prove are equivalent to <span class="math inline">\(S^1\)</span>, and so give terms in the type <span class="math inline">\(\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\stackrel{\mathrm{def}}{=}\sum_{A:\mathcal{U}}||A\simeq S^1||_1\)</span>. We can call this component of the universe “mere circles.” In dimension 2 we will focus on a subset of complexes where the neighboring vertices and edges of each vertex (the vertex’s “link”) form a polygon. The homotopical realization <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span> of such a complex then has a map <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> from each vertex to a homotopical polygon, i.e. a map to <span class="math inline">\(\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span>. We do not know under what conditions this map necessarily extends to the higher cells of the realization.</p>
<p>Given a map <span class="math inline">\(\ensuremath{\mathbb{M}}\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> we can form the pullback</p>
<p><img src="./92c490bab129a4cb8dda6425574bf97743214ebe.svg" alt="image" /></p>
<p>to obtain a bundle of mere circles. We will discuss how, if <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> is an Eilenberg-Mac Lane space and if <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> factors through a map <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},2)\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> then the pullback is a principal fibration.</p>
<p>Then in Section <a href="#sec:connections" data-reference-type="ref" data-reference="sec:connections">4</a> we will name various elements of the above construction, indicating their relationship to classical definitions.</p>
<p>In Section <a href="#sec:vector_fields" data-reference-type="ref" data-reference="sec:vector_fields">5</a> we will define vector fields, which require a tangent bundle. We will introduce a method for computing vector fields along concatenations of paths.</p>
<p>Finally, in Section <a href="#sec:totals" data-reference-type="ref" data-reference="sec:totals">6</a> we will define a method for visiting all the faces of a manifold in order to form “totals” of local objects. We will examine the total curvature and the total index and prove that they are equal. Our proof tracks very closely with the classical proof of Hopf<span class="citation" data-cites="hopf"> (<a href="#ref-hopf" role="doc-biblioref">Hopf, 1983</a>)</span>, presented in detail in Needham<span class="citation" data-cites="needham"> (<a href="#ref-needham" role="doc-biblioref">Needham, 2021</a>)</span>. In their case they can go on to prove that these values are both equal to the Euler characteristic, but we would need an independent definition to prove agreement with, which we do not currently have.</p>
<h1 data-number="2" id="sec:torsors"><span class="header-section-number">2</span> Torsors and principal bundles</h1>
<p>Differential geometry is the study of principal bundles and their automorphisms. Principal bundles are bundles of torsors, so we start there.</p>
<h2 data-number="2.1" id="subsec:torsors"><span class="header-section-number">2.1</span> Torsors</h2>
<p>We will review some definitions and facts, drawing on the excellent resource <span class="citation" data-cites="buchholtz2023central"> (<a href="#ref-buchholtz2023central" role="doc-biblioref">Buchholtz <em>et al.</em>, 2023</a>)</span>.</p>
<div class="mydef">
<p><strong>Definition 1</strong>. <em>Let <span class="math inline">\(G\)</span> be a group with identity element <span class="math inline">\(e\)</span> (with the usual classical structure and properties). A <strong><span class="math inline">\(G\)</span>-set</strong> is a set <span class="math inline">\(X\)</span> equipped with a homomorphism <span class="math inline">\(\phi:(G,e)\to\mathop{\mathrm{Aut}}(X)\)</span>. If in addition we have a term of type <span class="math display">\[\mathsf{is\_torsor}(X,\phi)\stackrel{\mathrm{def}}{=}||X||_{-1}\times \prod_{x:X}\mathsf{is\_equiv}(\phi(-,x):(G,e)\to (X,x))\]</span> then we say <span class="math inline">\((X,\phi)\)</span> is a <strong><span class="math inline">\(G\)</span>-torsor</strong>. Denote the type of <span class="math inline">\(G\)</span>-torsors by <span class="math inline">\(BG\)</span>. Denote the <span class="math inline">\(G\)</span>-torsor given by <span class="math inline">\(G\)</span> itself under right-multiplication by <span class="math inline">\(\ensuremath{{G}_\mathrm{reg}}\)</span>.</em></p>
</div>
<p>A <span class="math inline">\(G\)</span>-equivariant map is a function <span class="math inline">\(f:X\to Y\)</span> such that <span class="math inline">\(f(\phi(g,x))=\psi(g,f(x))\)</span>. Denote the type of <span class="math inline">\(G\)</span>-equivariant maps by <span class="math inline">\(X\to_G Y\)</span>.</p>
<div class="mylemma">
<p><strong>Lemma 2</strong>. <em>(<span class="citation" data-cites="buchholtz2023central"> (<a href="#ref-buchholtz2023central" role="doc-biblioref">Buchholtz <em>et al.</em>, 2023</a>)</span> Lemma 5.2). If <span class="math inline">\((X,\phi),(Y,\psi):BG\)</span> then there is a natural equivalence <span class="math inline">\((X=_{BG}Y) \simeq (X\to_G Y)\)</span>.0◻</em></p>
</div>
<div class="mylemma">
<p><strong>Lemma 3</strong>. <em>(<span class="citation" data-cites="buchholtz2023central"> (<a href="#ref-buchholtz2023central" role="doc-biblioref">Buchholtz <em>et al.</em>, 2023</a>)</span> Proposition 5.4). A <span class="math inline">\(G\)</span>-set <span class="math inline">\((X,\phi)\)</span> is a <span class="math inline">\(G\)</span>-torsor if and only if there merely exists a <span class="math inline">\(G\)</span>-equivariant equivalence <span class="math inline">\(\ensuremath{{G}_\mathrm{reg}}\to_G X\)</span>.0◻</em></p>
</div>
<div class="mycor">
<p><strong>Corollary 4</strong>. <em>(<span class="citation" data-cites="buchholtz2023central"> (<a href="#ref-buchholtz2023central" role="doc-biblioref">Buchholtz <em>et al.</em>, 2023</a>)</span> Corollary 5.5). The pointed type <span class="math inline">\((BG,*)\)</span> is a <span class="math inline">\(\mathrm{K}(G,1)\)</span>.0◻</em></p>
</div>
<p>In particular, to classify principal <span class="math inline">\(S^1\)</span>-bundles we map into the space <span class="math inline">\(\mathrm{K}(S^1, 1)\)</span>, a type of torsors of the circle. Since <span class="math inline">\(S^1\)</span> is a <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},1)\)</span>, we have <span class="math inline">\(\mathrm{K}(S^1,1)\simeq\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span>.</p>
<p>Suppose we have a basepoint <span class="math inline">\(b:\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span>. A logical one to choose would be <span class="math inline">\(S^1:\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> itself. Following <span class="citation" data-cites="buchholtz2023central"> (<a href="#ref-buchholtz2023central" role="doc-biblioref">Buchholtz <em>et al.</em>, 2023</a>)</span> Section 4.3, a term <span class="math inline">\(X : \mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> is a torsor for the higher group <span class="math inline">\(\Omega_b(\mathrm{K}(\ensuremath{\mathbb{Z}},2))\stackrel{\mathrm{def}}{=}(b=_{\mathrm{K}(\ensuremath{\mathbb{Z}},2)} b)\)</span>. In particular there is an action <span class="math inline">\(\alpha:(b=_{\mathrm{K}(\ensuremath{\mathbb{Z}},2)}b)\times X\to X\)</span>, and an equivalence <span class="math inline">\((\alpha, \ensuremath{\mathrm{pr}}_2) : (b=_{\mathrm{K}(\ensuremath{\mathbb{Z}},2)}b)\times X\stackrel{\sim}{\to}(X\times X)\)</span>.</p>
<h2 data-number="2.2" id="bundles-of-eilenberg-mac-lane-spaces"><span class="header-section-number">2.2</span> Bundles of Eilenberg-Mac Lane spaces</h2>
<p>To construct maps into <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> we will follow Scoccola<span class="citation" data-cites="sco"> (<a href="#ref-sco" role="doc-biblioref">Scoccola, 2020</a>)</span>. When can a map into a connected component of the universe be factored through an Eilenberg-Mac Lane space?</p>
<div class="mydef">
<p><strong>Definition 5</strong>. <em>Let <span class="math inline">\(G\)</span> be a group. Let <span class="math inline">\(\mathrm{EM}(G,n)\stackrel{\mathrm{def}}{=}\mathop{\mathrm{BAut}}(\mathrm{K}(G,n))\stackrel{\mathrm{def}}{=}\sum_{Y:\mathcal{U}}||Y\simeq \mathrm{K}(G,n)||_{-1}\)</span> be the connected component of <span class="math inline">\(\mathcal{U}\)</span> containing <span class="math inline">\(\mathrm{K}(G,n)\)</span>. A <strong><span class="math inline">\(\mathrm{K}(G,n)\)</span>-bundle</strong> on a type <span class="math inline">\(M\)</span> is a map <span class="math inline">\(M\to\mathrm{EM}(G,n)\)</span>.</em></p>
</div>
<p>Scoccola uses</p>
<ul>
<li><p>suspension <span class="math inline">\(\Sigma:\mathrm{EM}(G,n)\to\mathrm{EM}_{\bullet\bullet}(G,n)\)</span> (see <span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> §6.5), which maps into types with two points (denoted by the bullets),</p></li>
<li><p><span class="math inline">\((n+1)\)</span>-truncation (see <span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> §7.3),</p></li>
<li><p>forgetting a point <span class="math inline">\(F_\bullet:\mathrm{EM}_{\bullet\bullet}(G,n)\to \mathrm{EM}_{\bullet}(G,n)\)</span>,</p></li>
</ul>
<p>to form the composition <span class="math display">\[\mathrm{EM}(G,n)\xrightarrow[]{||\Sigma||_{n+1}} \mathrm{EM}_{\bullet\bullet}(G,n+1)\xrightarrow[]{F_\bullet}\mathrm{EM_{\bullet}}(G,n+1)\]</span> from types to types with two points (north and south), then to pointed types (by forgetting the south point).</p>
<div class="mydef">
<p><strong>Definition 6</strong>. <em>Given <span class="math inline">\(f:M\to\mathrm{EM}(G,n)\)</span>, the <strong>associated action of <span class="math inline">\(M\)</span> on <span class="math inline">\(G\)</span></strong>, denoted by <span class="math inline">\(f_\bullet\)</span> is defined to be <span class="math inline">\(f_\bullet=F_\bullet\circ||\Sigma||_{n+1}\circ f\)</span>.</em></p>
</div>
<div id="thm:sco" class="mythm">
<p><strong>Theorem 7</strong>. <em>(Scoccola<span class="citation" data-cites="sco"> (<a href="#ref-sco" role="doc-biblioref">Scoccola, 2020</a>)</span> Proposition 2.39). A <span class="math inline">\(\mathrm{K}(G,n)\)</span> bundle <span class="math inline">\(f:M\to\mathrm{EM}(G,n)\)</span> factors through a map <span class="math inline">\(M\to\mathrm{K}(G,n+1)\)</span>, and so is a principal fibration, if and only if the associated action <span class="math inline">\(f_\bullet\)</span> is merely homotopic to a constant map.</em></p>
</div>
<div class="mynote">
<p><strong>Remark 8</strong>. <em>Iterating the loop map gives the isomorphism <span class="math inline">\(\Omega^{(n+1)}:\mathrm{EM_{\bullet}}(G,n+1)\simeq \mathrm{K}(\mathop{\mathrm{Aut}}G,1)\)</span> (see <span class="citation" data-cites="sco"> (<a href="#ref-sco" role="doc-biblioref">Scoccola, 2020</a>)</span> Lemma 2.7). Theorem <a href="#thm:sco" data-reference-type="ref" data-reference="thm:sco">7</a> therefore says that the map <span class="math inline">\(f\)</span> factors through <span class="math inline">\(\mathrm{K}(G,n+1)\)</span> if and only if the map into <span class="math inline">\(\mathrm{K}(\mathop{\mathrm{Aut}}G,1)\)</span> is homotopic to a constant. In the case of <span class="math inline">\(G=\ensuremath{\mathbb{Z}}\)</span>, the map <span class="math inline">\(f_\bullet:M\to \mathrm{K}(\mathop{\mathrm{Aut}}\ensuremath{\mathbb{Z}}, 1)\)</span> deserves to be called the first Stiefel-Whitney class of <span class="math inline">\(f\)</span> and one can interpret its triviality as <em>orientability</em>. . This point of view is discussed in Schreiber<span class="citation" data-cites="dcct"> (<a href="#ref-dcct" role="doc-biblioref">Schreiber, 2013</a>)</span> (starting with Example 1.2.138) and in Myers<span class="citation" data-cites="myersgood"> (<a href="#ref-myersgood" role="doc-biblioref">Myers, 2022</a>)</span>.</em></p>
</div>
<h2 data-number="2.3" id="sec:pathovers"><span class="header-section-number">2.3</span> Pathovers</h2>
<p>Here we will recall basic facts from homotopy type theory. See for example <span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> or <span class="citation" data-cites="egbert"> (<a href="#ref-egbert" role="doc-biblioref">Rijke, 2025</a>)</span>. Suppose we have <span class="math inline">\(T:M\to\mathcal{U}\)</span> and <span class="math inline">\(P\stackrel{\mathrm{def}}{=}\sum_{x:M}Tx\)</span>. We adopt a convention of naming objects in <span class="math inline">\(M\)</span> with Latin letters, and the corresponding structures in <span class="math inline">\(P\)</span> with Greek letters. Recall that if <span class="math inline">\(p:a=_M b\)</span> then <span class="math inline">\(T\)</span> acts on <span class="math inline">\(p\)</span> with what’s called the <em>action on paths</em>, denoted <span class="math inline">\(\ensuremath{\mathsf{ap}}(T)(p):Ta=Tb\)</span> (<span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> §2.2). This is a path in the codomain <span class="math inline">\(\mathcal{U}\)</span> of <span class="math inline">\(T\)</span>. Type theory also provides a function called <em>transport</em>, denoted <span class="math inline">\(\mathsf{tr}(p):Ta\to Tb\)</span> (<span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> §2.3) which acts on the fibers of <span class="math inline">\(P\)</span>. <span class="math inline">\(\mathsf{tr}(p)\)</span> is a function, acting on the terms of the types <span class="math inline">\(Ta\)</span> and <span class="math inline">\(Tb\)</span>, and univalence tells us this is the isomorphism corresponding to <span class="math inline">\(\ensuremath{\mathsf{ap}}(T)(p)\)</span>.</p>
<p>Type theory also tells us that paths in <span class="math inline">\(P\)</span> are given by pairs of paths: a path <span class="math inline">\(p:a=_M b\)</span> in the base, and a pathover <span class="math inline">\(\pi:\mathsf{tr}(p)(\alpha)=_{Tb}\beta\)</span> between <span class="math inline">\(\alpha:Ta\)</span> and <span class="math inline">\(\beta:Tb\)</span> in the fibers (<span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> §2.7). We can’t directly compare <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> since they are of different types, so we apply transport to one of them. We say <span class="math inline">\(\pi\)</span> lies over <span class="math inline">\(p\)</span>. See Figure <a href="#fig:pathovers" data-reference-type="ref" data-reference="fig:pathovers">1</a>.</p>
<figure id="fig:pathovers">
<embed src="figs/pathovers.pdf" style="width:2.77778in" />
<figcaption>A path <span class="math inline">\(\pi\)</span> over the path <span class="math inline">\(p\)</span> in the base involves the transport function.</figcaption>
</figure>
<p>Given functions <span class="math inline">\(\phi,\psi:A\to B\)</span> between two arbitrary types we can form a type family of paths <span class="math inline">\(\alpha:A\to\mathcal{U}\)</span> by <span class="math inline">\(\alpha(a)\stackrel{\mathrm{def}}{=}(\phi(a)=_B\psi(a))\)</span>. Transport in this family is given by concatenation as follows (see Figure <a href="#fig:transport_family_of_paths" data-reference-type="ref" data-reference="fig:transport_family_of_paths">2</a>), where <span class="math inline">\(p:a=_A a&#39;\)</span> and <span class="math inline">\(q:\phi(a)=\psi(a)\)</span> (<span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> Theorem 2.11.3): <span class="math display">\[\mathsf{tr}(p)(q) = \phi(p)^{-1}\cdot q\cdot \psi(p)\]</span> which gives a path in <span class="math inline">\(\phi(a&#39;)=\psi(a&#39;)\)</span> by connecting dots between the terms <span class="math inline">\(\phi(a&#39;), \phi(a), \psi(a), \psi(a&#39;)\)</span>. This relates a would-be homotopy <span class="math inline">\(\phi\sim\psi\)</span> specified at a single point, to a point at the end of a path. We will use this to help construct such homotopies.</p>
<figure id="fig:transport_family_of_paths">
<img src="./17fd332eed0d72f858e81f4722d8b1e5b33a5029.svg" />
<figcaption>Transport along <span class="math inline">\(p\)</span> in the fibers of a family of paths. The fiber over <span class="math inline">\(a\)</span> is <span class="math inline">\(\phi(a)=\psi(a)\)</span> where <span class="math inline">\(\phi,\psi:A\to B\)</span>.</figcaption>
</figure>
<p>Finally, recall that in the presence of a section <span class="math inline">\(X:M\to P\)</span> there is a dependent generalization of <span class="math inline">\(\ensuremath{\mathsf{ap}}\)</span> called <span class="math inline">\(\mathsf{apd}\)</span>: <span class="math inline">\(\mathsf{apd}(X)(p):\mathsf{tr}(p)(X(a))=X(b)\)</span> which is a pathover between the two values of the section over the basepoints of the path <span class="math inline">\(p\)</span> (<span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> Lemma 2.3.4).</p>
<h2 data-number="2.4" id="sec:automorphisms"><span class="header-section-number">2.4</span> The bundle of automorphisms</h2>
<div class="mydef">
<p><strong>Definition 9</strong>. <em>Suppose we have <span class="math inline">\(T:M\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> and <span class="math inline">\(P\stackrel{\mathrm{def}}{=}\sum_{x:M}Tx\)</span>. Then we can form the type family <span class="math inline">\(\mathop{\mathrm{Aut}}T:M\to\mathcal{U}\)</span> given by <span class="math inline">\(\mathop{\mathrm{Aut}}T(x)\stackrel{\mathrm{def}}{=}(Tx=Tx)\)</span>. The total space <span class="math inline">\(\mathop{\mathrm{Aut}}P\stackrel{\mathrm{def}}{=}\sum_{x:M}(Tx=Tx)\)</span>, which is a bundle of groups, is called the <strong>automorphism bundle</strong> or the <strong>gauge bundle</strong> and sections <span class="math inline">\(\prod_{x:M}(Tx=Tx)\)</span>, which are homotopies <span class="math inline">\(T\sim T\)</span>, are called <strong>automorphisms of <span class="math inline">\(P\)</span></strong> or <strong>gauge transformations</strong>.</em></p>
</div>
<p>If the automorphism group of the fibers is commutative then the automorphism bundle is trivial.</p>
<div id="lem:gauge_triv" class="mylemma">
<p><strong>Lemma 10</strong>. <em>Suppose <span class="math inline">\(M\)</span> is connected and we have a point <span class="math inline">\(m:M\)</span>. Then we have a trivialization <span class="math inline">\(\mathop{\mathrm{Aut}}P\simeq M\times (Tm=Tm)\)</span>. This is equivalent to saying the map <span class="math inline">\(\mathop{\mathrm{Aut}}T\)</span> is equivalent to a constant map.</em></p>
</div>
<div class="myproof">
<p>We will produce a term <span class="math inline">\(\tau:\prod_{x:M}((Tx=Tx)\xrightarrow[]{\simeq}(Tm=Tm))\)</span>. First note that <span class="math inline">\((Tx=Tx)\)</span> is a commutative group, as it is merely isomorphic to <span class="math inline">\(S^1=\mathrm{K}(\ensuremath{\mathbb{Z}},1)\)</span>. Suppose we have a path <span class="math inline">\(p:x=_M m\)</span> (which exists by connectedness), and define <span class="math inline">\(\tau x=\mathsf{tr}(p)\)</span>. Transport in the family <span class="math inline">\(\mathop{\mathrm{Aut}}T\)</span> is given by concatenation (as explained in Section <a href="#sec:pathovers" data-reference-type="ref" data-reference="sec:pathovers">2.3</a>), i.e. <span class="math inline">\(\mathsf{tr}(p)(f)=T(p)^{-1}\cdot f\cdot T(p)\)</span>. To show that <span class="math inline">\(\tau\)</span> is independent of the choice of <span class="math inline">\(p\)</span>, suppose we have <span class="math inline">\(p,q:x=_M m\)</span>. Then <span class="math inline">\(\mathsf{tr}(p\cdot q^{-1})=T(p\cdot q^{-1})^{-1}\cdot -\cdot T(p\cdot q^{-1})\)</span> which is conjugation in the commutative group <span class="math inline">\(Tx=Tx\)</span>, hence is the identity. This proves that <span class="math inline">\(\mathsf{tr}(p)=\mathsf{tr}(q)\)</span>.</p>
</div>
<h1 data-number="3" id="sec:discrete_man"><span class="header-section-number">3</span> Discrete manifolds</h1>
<p>We will remind ourselves of the definition of a classical simplicial complex, in sets. Then we will create a type that realizes the data of a complex, using pushouts.</p>
<h2 data-number="3.1" id="abstract-simplicial-complexes"><span class="header-section-number">3.1</span> Abstract simplicial complexes</h2>
<div class="mydef">
<p><strong>Definition 11</strong>. <em>An <strong>abstract simplicial complex <span class="math inline">\(M\)</span> of dimension <span class="math inline">\(n\)</span></strong> is an ordered list <span class="math inline">\(M\stackrel{\mathrm{def}}{=}[M_0,\ldots,M_n]\)</span> consisting of a set <span class="math inline">\(M_0\)</span> of vertices, and for each <span class="math inline">\(0&lt;k\leq n\)</span> a set <span class="math inline">\(M_k\)</span> of subsets of <span class="math inline">\(M_0\)</span> of cardinality <span class="math inline">\(k+1\)</span>, such that for any <span class="math inline">\(j&lt;k\)</span>, any <span class="math inline">\((j+1)\)</span>-element subset of an element of <span class="math inline">\(M_k\)</span> is an element of <span class="math inline">\(M_j\)</span>. The elements of <span class="math inline">\(M_k\)</span> are called <strong><span class="math inline">\(k\)</span>-faces</strong>. Denote by <span class="math inline">\(\mathsf{SimCom_n}\)</span> the type of abstract simplicial complexes of dimension <span class="math inline">\(n\)</span>. Let <span class="math inline">\(M_{\leq k}\stackrel{\mathrm{def}}{=}[M_0,\ldots,M_k]\)</span> and note that <span class="math inline">\(M_{\leq n}=M\)</span>. We call <span class="math inline">\(M_{\leq k}\)</span> the <strong><span class="math inline">\(k\)</span>-skeleton</strong> of <span class="math inline">\(M\)</span>, and it is a (<span class="math inline">\(k\)</span>-)complex in its own right. A <strong>morphism</strong> <span class="math inline">\(f\)</span> from <span class="math inline">\(M=[M_0,\ldots,M_m]\)</span> to <span class="math inline">\(N=[N_0,\ldots,N_n]\)</span> is a function on vertices <span class="math inline">\(f:M_0\to N_0\)</span> such that for any face of <span class="math inline">\(M\)</span> the image under <span class="math inline">\(f\)</span> is a face of <span class="math inline">\(N\)</span>. <span class="math inline">\(M\)</span> is automatically equipped with a chain of inclusions of the skeleta <span class="math inline">\(M_0\hookrightarrow M_{\leq 1}\hookrightarrow\cdots\hookrightarrow M_{\leq n}=M\)</span>, which are simply inclusions of lists.</em></p>
</div>
<p>We can imagine constructing a simplicial complex dimension by dimension.</p>
<div class="mydef">
<p><strong>Definition 12</strong>. <em>Denote by <span class="math inline">\(P(n)\)</span> the simplicial complex obtained by taking the set of all subsets of the standard <span class="math inline">\((n+1)\)</span>-element set <span class="math inline">\(P(n)_0\stackrel{\mathrm{def}}{=}\{0,\ldots,n\}\)</span>. We call <span class="math inline">\(P(n)\)</span> the <strong>complete <span class="math inline">\(n\)</span>-simplex</strong>. We will refer to the <span class="math inline">\((n-1)\)</span>-skeleton <span class="math inline">\(P(n)_{\leq(n-1)}\)</span> with the suggestive notation <span class="math inline">\(\partial P(n)\)</span>.</em></p>
</div>
<p>Note that <span class="math inline">\(P(n)_{(n-1)}\)</span> has <span class="math inline">\(n+1\)</span> elements. For example, <span class="math inline">\(P(2)_1\)</span> consists of the three 2-element subsets of <span class="math inline">\(\{0, 1, 2\}\)</span>.</p>
<p>Given <span class="math inline">\(M=[M_0,\ldots,M_n]\)</span> and <span class="math inline">\(k\leq n\)</span>, a face <span class="math inline">\(f_k:M_k\)</span> is the union of <span class="math inline">\((k+1)\)</span> faces in <span class="math inline">\(M_{k-1}\)</span>, and so the <span class="math inline">\(k\)</span>-skeleton is obtained from the <span class="math inline">\((k-1)\)</span>-skeleton by forming the following pushout of sets:<br />
<img src="./1b283954d91c699c95934b434eeab7be62cfc4fd.svg" alt="image" /> where the vertical “attach” map <span class="math inline">\(a_k(f_k, -)\)</span> picks out the <span class="math inline">\(k+1\)</span> subsets of <span class="math inline">\(f_k\)</span>.</p>
<div id="def:link" class="mydef">
<p><strong>Definition 13</strong>. <em>In an abstract simplicial complex <span class="math inline">\(M\)</span> of dimension <span class="math inline">\(n\)</span>, the <strong>link</strong> of a vertex <span class="math inline">\(v\)</span> is the <span class="math inline">\((n-1)\)</span>-dimensional subcomplex containing every face <span class="math inline">\(m\in M_{n-1}\)</span> such that <span class="math inline">\(v\notin m\)</span> and <span class="math inline">\(m\cup v\)</span> is an <span class="math inline">\(n\)</span>-face of <span class="math inline">\(M\)</span>. </em></p>
</div>
<p>The link is easier to understand as all the neighboring vertices of <span class="math inline">\(v\)</span> and the subcomplex containing these. See for example Figure <a href="#fig:link" data-reference-type="ref" data-reference="fig:link">3</a>.</p>
<figure id="fig:link">
<img src="./d626f162e40cdd325d646afbf42081d31a48d4f2.svg" />
<figcaption>The link of <span class="math inline">\(v\)</span> in this complex consists of the vertices <span class="math inline">\(\{a,b,c,d,e,f\}\)</span> and the edges <span class="math inline">\(\{ab,bc,cd,de,ef,fa\}\)</span>, forming a hexagon.</figcaption>
</figure>
<div class="mynote">
<p><strong>Remark 14</strong>. <em>The <em>geometric realization</em> of a complex uses the combinatorial data to form pushouts of standard simplices inside the category of topological spaces. A <em>simplicial sphere</em> is a simplicial complex whose geometric realization is homeomorphic to a sphere. A classical 1940 result of Whitehead, building on Cairn, states that every smooth <span class="math inline">\(n\)</span>-manifold is the geometric realization of a simplicial complex of dimension <span class="math inline">\(n\)</span> such that the link is the geometric realization of an <span class="math inline">\((n-1)\)</span>-sphere<span class="citation" data-cites="whitehead_triangulation"> (<a href="#ref-whitehead_triangulation" role="doc-biblioref">Whitehead, 1940</a>)</span>. For more of this theory see the classic book by Kirby and Siebenmann<span class="citation" data-cites="kirby_siebenmann"> (<a href="#ref-kirby_siebenmann" role="doc-biblioref">Kirby &amp; Siebenmann, 1977</a>)</span>.</em></p>
</div>
<h2 data-number="3.2" id="higher-inductive-combinatorial-manifolds"><span class="header-section-number">3.2</span> Higher inductive combinatorial manifolds</h2>
<p>We will realize a simplicial complex as a higher inductive type by forming a sequence of pushouts. We will work upward by dimension so as to define the appropriate standard sphere that we need in the next dimension.</p>
<div class="mydef">
<p><strong>Definition 15</strong>. <em>The <strong>realization <span class="math inline">\(\ensuremath{\mathbb{M}}_0\)</span> of a 0-dimensional simplicial complex</strong> <span class="math inline">\(M_0\)</span> is simply the set <span class="math inline">\(M_0\)</span>.</em></p>
</div>
<div class="mydef">
<p><strong>Definition 16</strong>. <em>The <strong>simplicial 0-sphere</strong> <span class="math inline">\(\partial\Delta^{1}\)</span> is the realization of <span class="math inline">\(\partial P(1)\)</span>.</em></p>
</div>
<div class="mydef">
<p><strong>Definition 17</strong>. <em>The <strong>realization <span class="math inline">\(\ensuremath{\mathbb{M}}_1\)</span> of a 1-dimensional simplicial complex</strong> <span class="math inline">\([M_0, M_1]\)</span> is the pushout</em></p>
</div>
<p><img src="./5fd87a122c89aadaa7b191dff510552e81fe2096.svg" alt="image" /></p>
<p>where <span class="math inline">\(a_k\)</span> is the attachment data of the edges in <span class="math inline">\(M_1\)</span>, as in diagram <a href="#eq:attach" data-reference-type="ref" data-reference="eq:attach">[eq:attach]</a>. The right vertical map <span class="math inline">\(*_1\)</span> provides a hub point for each edge, and the homotopy <span class="math inline">\(h_1\)</span> provides the spokes that connect the hub to the vertices.</p>
<div class="mydef">
<p><strong>Definition 18</strong>. <em>The <strong>simplicial 1-sphere</strong> <span class="math inline">\(\partial\Delta^{2}\)</span> is the realization of <span class="math inline">\(\partial P(2)\)</span>.</em></p>
</div>
<p><img src="./57b2a01e8a4698ce9b88ccc4982306124886baeb.svg" alt="image" /></p>
<div class="mydef">
<p><strong>Definition 19</strong>. <em>A <strong>realization <span class="math inline">\(\ensuremath{\mathbb{M}}_2\)</span> of a 2-dimensional simplicial complex</strong> <span class="math inline">\([M_0, M_1, M_2]\)</span> is the pushout</em></p>
</div>
<p><img src="./cc99b738eaf3b7239e5c16f3dc5cac16a61defe7.svg" alt="image" /></p>
<p>where <span class="math inline">\(\mathbb{A}_1\)</span> is such that this additional diagram commutes</p>
<p><img src="./700a76745a47fd235220bc11ab2eee0bebd28183.svg" alt="image" /></p>
<p>In this diagram <span class="math inline">\(a_1\)</span> is the simplicial attaching map from <a href="#eq:attach" data-reference-type="ref" data-reference="eq:attach">[eq:attach]</a>, and <span class="math inline">\(*_{\mathbb{M}_{\leq 1}}\)</span> simply gathers the hub maps from <span class="math inline">\(M_0\)</span> and <span class="math inline">\(M_1\)</span> into <span class="math inline">\(\ensuremath{\mathbb{M}}_1\)</span>. The commutativity then says that <span class="math inline">\(\mathbb{A}_1\)</span> reflects the attachment data.</p>
<div class="mydef">
<p><strong>Definition 20</strong>. <em>Given a notion of realization in dimension <span class="math inline">\(n-1\)</span>, a <strong>realization <span class="math inline">\(\ensuremath{\mathbb{M}}_n\)</span> of an <span class="math inline">\(n\)</span>-dimensional simplicial complex</strong> <span class="math inline">\([M_0, \ldots, M_n]\)</span> is the pushout</em></p>
</div>
<p><img src="./d941cc48dbe454acf6045a5ba725aff08910127c.svg" alt="image" /></p>
<p>where <span class="math inline">\(\mathbb{A}_n\)</span> is such that the following commutes</p>
<p><img src="./67808206b368acadf1b646856f16216c6df6ac15.svg" alt="image" /></p>
<p>Gathering some of the inductive process into one definition, we have</p>
<div id="def:higher_realization" class="mydef">
<p><strong>Definition 21</strong>. <em>A <strong>realization</strong> <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span> corresponding to an abstract simplicial complex <span class="math inline">\(M:\mathsf{SimCom_n}\)</span> consists of</em></p>
<ol>
<li><p><em><span class="math inline">\(n+1\)</span> types <span class="math inline">\(\ensuremath{\mathbb{M}}_0,\ldots,\ensuremath{\mathbb{M}}_n\)</span> where <span class="math inline">\(\ensuremath{\mathbb{M}}_0\stackrel{\mathrm{def}}{=}M_0\)</span>,</em></p></li>
<li><p><em><span class="math inline">\(n\)</span> spans <span class="math inline">\({\ensuremath{\mathbb{M}}_{i}}\xleftarrow[]{\mathbb{A}_{i}}{M_{i+1}\times \partial\Delta^{i+1}}\xrightarrow[]{\ensuremath{\mathrm{pr}}_1}{M_{i+1}}\)</span>, <span class="math inline">\(i=0,\ldots,n-1\)</span>, where <span class="math inline">\(\partial\Delta^{i+1}\)</span> is the realization of the boundary of a standard simplex and <span class="math inline">\(\mathbb{A}_i\)</span> are called <strong>attachment maps</strong>,</em></p></li>
<li><p><em><span class="math inline">\(n\)</span> pushout squares from each span to <span class="math inline">\(\ensuremath{\mathbb{M}}_{i+1}\)</span>, with induced maps <span class="math inline">\(\imath_i:\ensuremath{\mathbb{M}}_i\to\ensuremath{\mathbb{M}}_{i+1}\)</span>, <span class="math inline">\(*_{\ensuremath{\mathbb{M}}_{i+1}}:M_{i+1}\to\ensuremath{\mathbb{M}}_{i+1}\)</span> and proof of commutativity <span class="math inline">\(h_{i+1}\)</span>.</em></p></li>
</ol>
<p><em>A <strong>cellular type</strong> is a sequence of types <span class="math inline">\(\ensuremath{\mathbb{M}}_0\xrightarrow[]{\imath_0}\ensuremath{\mathbb{M}}_1\xrightarrow[]{\imath_1}\cdots\xrightarrow[]{\imath_{n-1}}\ensuremath{\mathbb{M}}_n\)</span>, together with a proof of existence of some <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span> inducing this sequence.</em></p>
</div>
<h2 data-number="3.3" id="sec:polygons"><span class="header-section-number">3.3</span> Polygons</h2>
<p>The 1-type <span class="math inline">\(\partial\Delta^{2}\)</span> has three vertices. In order to define the link of an arbitrary realization, we will need to have <span class="math inline">\(n\)</span>-gons for <span class="math inline">\(n\geq 3\)</span>. And since <span class="math inline">\(S^1\)</span> could be called a 1-gon, we will also define a 2-gon.</p>
<div class="mydef">
<p><strong>Definition 22</strong>. <em>Define <span class="math inline">\(C(n)\)</span>, <span class="math inline">\(n\geq 3\)</span> to be a simplicial complex with <span class="math inline">\(C(n)_{0}=\{v_1, \ldots, v_n\}\)</span> and edges <span class="math inline">\(e_1=\{v_1,v_2\}\)</span>, <span class="math inline">\(\ldots\)</span>, <span class="math inline">\(e_{n-1}=\{v_{n-1}, v_n\}\)</span>, and <span class="math inline">\(e_n=\{v_n, v_0\}\)</span>. We call <span class="math inline">\(C(n)\)</span> a <strong>polygon</strong> or <strong><span class="math inline">\(n\)</span>-gon</strong>. The realization of <span class="math inline">\(C(n)\)</span> will be denoted <span class="math inline">\(\mathbb{C}(n)\)</span>. When it is convenient we may refer to an <span class="math inline">\(n\)</span>-gon by <span class="math inline">\([{v_1\cdots v_n}]\)</span> and to its realization by <span class="math inline">\(\llbracket{v_1\cdots v_n}\rrbracket\)</span>.</em></p>
</div>
<p>We also have two special polygons:</p>
<div class="mydef">
<p><strong>Definition 23</strong>. <em>The higher inductive type <span class="math inline">\(S^1\)</span>, also denoted <span class="math inline">\(\mathbb{C}(1)\)</span>, has constructors: <span class="math display">\[\begin{aligned}
S^1&amp;:\mathsf{Type}\\
\mathsf{base}&amp;:S^1\\
\mathsf{loop}&amp;:\mathsf{base}=\mathsf{base}
\end{aligned}\]</span></em></p>
</div>
<div class="mydef">
<p><strong>Definition 24</strong>. <em>The higher inductive type <span class="math inline">\(\mathbb{C}(2)\)</span>, has constructors: <span class="math display">\[\begin{aligned}
\mathbb{C}(2) &amp;:\mathsf{Type}\\
v_1, v_2&amp;:\mathbb{C}(2) \\
\ell_{12}, r_{21}&amp;:v_1=v_2\\
\end{aligned}\]</span></em></p>
</div>
<div id="lem:addpoints" class="mylemma">
<p><strong>Lemma 25</strong>. <em><span class="math inline">\(\mathbb{C}(2)\simeq \mathbb{C}(1)\)</span> and in fact <span class="math inline">\(\mathbb{C}(n)\simeq \mathbb{C}(n-1)\)</span>.</em></p>
</div>
<div class="myproof">
<p>(Compare to <span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> Lemma 6.5.1.) In the case of <span class="math inline">\(\mathbb{C}(1)\)</span> we will denote its constructors by <span class="math inline">\(\ensuremath{\mathsf{base}}\)</span> and <span class="math inline">\(\ensuremath{\mathsf{loop}}\)</span>. For <span class="math inline">\(\mathbb{C}(2)\)</span> we will denote the points by <span class="math inline">\(v_1, v_2\)</span> and the edges by <span class="math inline">\(\ell_{12}, r_{21}\)</span>. For <span class="math inline">\(\mathbb{C}(3)\)</span> and higher we will denote the points by <span class="math inline">\(v_1,\ldots,v_n\)</span> and the edges by <span class="math inline">\(e_{i,j}:v_i=v_j\)</span> where <span class="math inline">\(j=i+1\)</span> except for <span class="math inline">\(e_{n,1}\)</span>.</p>
<p>First we will define <span class="math inline">\(f:\mathbb{C}(2)\to \mathbb{C}(1)\)</span> and <span class="math inline">\(g:\mathbb{C}(1)\to \mathbb{C}(2)\)</span>, then prove they are inverses. <span class="math display">\[\begin{aligned}
f(v_1)=f(v_2)&amp;=\ensuremath{\mathsf{base}}&amp;\quad g(\ensuremath{\mathsf{base}})&amp;=v_1\\
f(\ell_{12})&amp;=\ensuremath{\mathsf{loop}}&amp;\quad g(\ensuremath{\mathsf{loop}})&amp;=\ell_{12}\cdot r_{21}\\
f(r_{21}) &amp;= \ensuremath{\mathsf{refl}}_{\ensuremath{\mathsf{base}}}&amp; &amp; \\
\end{aligned}\]</span></p>
<p>We need to show that <span class="math inline">\(f\circ g\sim \ensuremath{\text{id}}_{\mathbb{C}(1)}\)</span> and <span class="math inline">\(g\circ f\sim\ensuremath{\text{id}}_{\mathbb{C}(2)}\)</span>. Think of <span class="math inline">\(f\)</span> as sliding <span class="math inline">\(v_2\)</span> along <span class="math inline">\(r_{21}\)</span> to coalesce with <span class="math inline">\(v_1\)</span>, as in Figure <a href="#fig:shrink" data-reference-type="ref" data-reference="fig:shrink">4</a>. This may help understand why the somewhat intricate proof is working.</p>
<figure id="fig:shrink">

<figcaption>We imagine shrinking <span class="math inline">\(r_{21}\)</span> down to become <span class="math inline">\(\ensuremath{\mathsf{refl}}_\ensuremath{\mathsf{base}}\)</span> in <span class="math inline">\(S^1\)</span>.</figcaption>
</figure>
<p>We need terms <span class="math inline">\(p:\prod_{a:\mathbb{C}(1)}f(g(a))=a\)</span> and <span class="math inline">\(q:\prod_{a:\mathbb{C}(2)}g(f(a))=a\)</span>. We will proceed by induction, defining appropriate paths on point constructors and then checking a condition on path constructors that confirms that the built-in transport of these type families respects the definition on points.</p>
<p>Looking first at <span class="math inline">\(g\circ f\)</span>, which shrinks <span class="math inline">\(r_{21}\)</span>, we have the following data to work with: <span class="math display">\[\begin{aligned}
g(f(v_1))=g(f(v_2))&amp;=v_1\\
g(f(\ell_{12}))&amp;=\ell_{12}\cdot r_{21}\\
g(f(r_{21})) &amp;= \ensuremath{\mathsf{refl}}_{v_1}.
\end{aligned}\]</span> We then need to supply a homotopy from this data to <span class="math inline">\(\ensuremath{\text{id}}_{\mathbb{C}(2)}\)</span>, which consists of a section and pathovers over <span class="math inline">\(\mathbb{C}(2)\)</span>: <span class="math display">\[\begin{aligned}
p_1&amp;:g(f(v_1))=v_1\\
p_2&amp;:g(f(v_1))=v_2\\
H_\ell&amp;:\mathsf{tr}(\ell_{12})(p_1)=p_2\\
H_r&amp;:\mathsf{tr}(r_{21})(p_2)=p_1.
\end{aligned}\]</span> which simplifies to <span class="math display">\[\begin{aligned}
p_1&amp;:v_1=v_1\\
p_2&amp;:v_1=v_2\\
H_\ell&amp;:g(f(\ell_{12}))^{-1}\cdot p_1\cdot \ell_{12}=p_2\\
H_r&amp;:=g(f(r_{21}))^{-1}\cdot p_2\cdot r_{21}= p_1
\end{aligned}\]</span> and then to <span class="math display">\[\begin{aligned}
p_1&amp;:v_1=v_1\\
p_2&amp;:v_1=v_2\\
H_\ell&amp;:(\ell_{12}\cdot r_{21})^{-1}\cdot p_1\cdot \ell_{12}=p_2\\
H_r&amp;:\ensuremath{\mathsf{refl}}_{v_1}\cdot p_2\cdot r_{21}= p_1
\end{aligned}\]</span></p>
<p>To solve all of these constraints we can choose <span class="math inline">\(p_1\stackrel{\mathrm{def}}{=}\ensuremath{\mathsf{refl}}_{v_1}\)</span>, which by consulting either <span class="math inline">\(H_\ell\)</span> or <span class="math inline">\(H_r\)</span> requires that we take <span class="math inline">\(p_2\stackrel{\mathrm{def}}{=}{r_{21}}^{-1}\)</span>.</p>
<p>Now examining <span class="math inline">\(f\circ g\)</span>, we have <span class="math display">\[\begin{aligned}
f(g(\ensuremath{\mathsf{base}}))&amp;=\ensuremath{\mathsf{base}}&amp;\\
f(g(\ensuremath{\mathsf{loop}}))&amp;=f(\ell_{12}\cdot r_{21})=\ensuremath{\mathsf{loop}}
\end{aligned}\]</span> and so we have an easy proof that this is the identity.</p>
<p>The proof of the more general case <span class="math inline">\(\mathbb{C}(n) \simeq \mathbb{C}(n-1)\)</span> is very similar. Take the maps <span class="math inline">\(f:\mathbb{C}(n)\to \mathbb{C}(n-1)\)</span>, <span class="math inline">\(g:\mathbb{C}(n-1)\to \mathbb{C}(n)\)</span> to be <span class="math display">\[\begin{aligned}
f(v_i)=v_i&amp;\quad(i=1,\ldots,n-1) &amp; g(v_i)&amp;=v_i&amp;\quad(i=1,\ldots,n-1)\\
f(v_n)=v_1&amp;\quad&amp; g(e_{i,i+1})&amp;=e_{i,i+1}&amp;\quad(i=1,\ldots,n-2)\\
f(e_{i,i+1})=e_{i,i+1}&amp;\quad(i=1,\ldots,n-1)&amp; g(e_{n-1,1})&amp;=e_{n-1,n}\cdot e_{n,1}&amp;\\
f(e_{n-1,n})=e_{n-1,1}&amp;&amp;&amp;&amp;\\
f(e_{n,1})=\ensuremath{\mathsf{refl}}_{v_1}&amp;&amp;&amp;&amp;
\end{aligned}\]</span> where <span class="math inline">\(f\)</span> should be thought of as shrinking <span class="math inline">\(e_{n,1}\)</span> so that <span class="math inline">\(v_n\)</span> coalesces into <span class="math inline">\(v_1\)</span>.</p>
<p>The proof that <span class="math inline">\(g\circ f\sim\ensuremath{\text{id}}_{\mathbb{C}(n)}\)</span> proceeds as follows: the composition is definitionally the identity except <span class="math display">\[\begin{aligned}
g(f(v_n))&amp;=v_1\\
g(f(e_{n-1,n}))&amp;=e_{n-1,n}\cdot e_{n,1}\\
g(f(e_{n,1}))&amp;= \ensuremath{\mathsf{refl}}_{v_1}.
\end{aligned}\]</span> Guided by our previous experience we choose <span class="math inline">\({e_{n,1}}^{-1}:g(f(v_n))=v_n\)</span>, and define the pathovers by transport.</p>
<p>The proof that <span class="math inline">\(f\circ g\sim\ensuremath{\text{id}}_{\mathbb{C}(n-1)}\)</span> requires only noting that <span class="math inline">\(f(g(e_{n-1,1}))=f(e_{n-1,n}\cdot e_{n,1})=e_{n-1,1}\cdot\ensuremath{\mathsf{refl}}_{v_1}=e_{n-1,1}\)</span>.</p>
</div>
<div id="cor:gon" class="mycor">
<p><strong>Corollary 26</strong>. <em>All polygons are equivalent to <span class="math inline">\(S^1\)</span>, i.e. we have terms <span class="math inline">\(e_n:\mathbb{C}(n)=S^1\)</span>, and hence we have constructed a map from the unit type <span class="math inline">\((\mathbb{C}(n), ||e_n||_{-1}):\mathsf{\mathbf{1}}\to \mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span>.</em></p>
</div>
<div class="myproof">
<p>The proofs in Lemma <a href="#lem:addpoints" data-reference-type="ref" data-reference="lem:addpoints">25</a> can be concatenated to give <span class="math inline">\(\mathbb{C}(n)\to\mathbb{C}(n-1)\to\cdots\to\mathbb{C}(2)\to S^1\)</span>.</p>
</div>
<div id="def:rotation" class="mydef">
<p><strong>Definition 27</strong>. <em>Let <span class="math inline">\(R:[{v_1\cdots v_n}]\to [{v_1\cdots v_n}]\)</span> (for “rotation”) be the map sending <span class="math inline">\(v_i\mapsto v_{i+1}\)</span> and <span class="math inline">\(v_n\mapsto v_0\)</span>. This map clearly preserves the edges, and so is a map of simplicial complexes, and extends to a map <span class="math inline">\(\llbracket{R}\rrbracket:\llbracket{v_1\cdots v_n}\rrbracket\to \llbracket{v_1\cdots v_n}\rrbracket\)</span>.</em></p>
</div>
<p>A key point is that simplicial maps form a set, but the homotopical realization <span class="math inline">\(\llbracket{R}\rrbracket\)</span> has a path to the identity:</p>
<div id="lem:rotation" class="mylemma">
<p><strong>Lemma 28</strong>. <em>The map <span class="math inline">\(\llbracket{R}\rrbracket: \llbracket{v_1\cdots v_n}\rrbracket\to \llbracket{v_1\cdots v_n}\rrbracket\)</span> is connected to <span class="math inline">\(\ensuremath{\mathsf{refl}}_{\llbracket{v_1\cdots v_n}\rrbracket}\)</span> by a homotopy <span class="math inline">\(H_R:\prod_{x:\llbracket{v_1\cdots v_n}\rrbracket}\llbracket{R}\rrbracket(x)=x\)</span>.</em></p>
</div>
<div class="myproof">
<p>If <span class="math inline">\(x\)</span> is a vertex, take <span class="math inline">\(H_R(x)\)</span> to be the obvious unique edge back to the starting vertex. This extends in the obvious functorial way to edges.</p>
</div>
<h2 data-number="3.4" id="the-octahedron-model-of-the-sphere"><span class="header-section-number">3.4</span> The octahedron model of the sphere</h2>
<p>We will create our first combinatorial surface, an octahedron. We will not prove that this type is equivalent to the sphere. In <span class="math inline">\(\mathsf{SimCom_n}\)</span> the combinatorial data of the faces can be represented with a <em>Hasse diagram</em>, which shows the poset of inclusions in a graded manner, with a special top and bottom element. We give an octahedron in Figure <a href="#fig:hasse_octohedron" data-reference-type="ref" data-reference="fig:hasse_octohedron">5</a>. The names of the vertices are short for white, yellow, blue, red, green, and orange, the colors of the faces of a Rubik’s cube. The octahedron is the dual of the cube, with each vertex corresponding to a face.</p>
<figure id="fig:hasse_octohedron">
<img src="./41cfa9cf6e056c83cc79c2711f6ee0981317076b.svg" />
<figcaption>Hasse diagram of an octahedron <span class="math inline">\(O\)</span>. The row of singletons is <span class="math inline">\(O_0\)</span> and above it are <span class="math inline">\(O_1\)</span> and <span class="math inline">\(O_2\)</span>.</figcaption>
</figure>
<p>We can realize <span class="math inline">\(O_0\to O_1\to O\)</span> as a cellular type denoted <span class="math inline">\(\ensuremath{\mathbb{O}}_0\to \ensuremath{\mathbb{O}}_1\to \ensuremath{\mathbb{O}}\)</span>.</p>
<div class="mylemma">
<p><strong>Lemma 29</strong>. <em>There is an equivalence <span class="math inline">\(\ensuremath{\mathbb{O}}\simeq S^2\)</span>.</em></p>
</div>
<div class="myproof">
<p>Omitted.</p>
</div>
<figure>
<img src="./ff7f3a1e9ad288427a1f8fe354f5e5e4112b62fd.svg" />
<figcaption>The type <span class="math inline">\(\ensuremath{\mathbb{O}}\)</span> which has 6 points, 12 1-paths, 8 2-paths.</figcaption>
</figure>
<h1 data-number="4" id="sec:connections"><span class="header-section-number">4</span> Bundles, connections, and curvature</h1>
<p>Bundles are simply maps into the universe. By using the extra cellular structure and the even more detailed combinatorial structure of higher realizations, we can identify inside of HoTT some additional classical definitions.</p>
<h2 data-number="4.1" id="definitions"><span class="header-section-number">4.1</span> Definitions</h2>
<p>Having the cellular structure allows us to define bundles and connections.</p>
<div id="def:connection" class="mydef">
<p><strong>Definition 30</strong>. <em>If <span class="math inline">\(\ensuremath{\mathbb{M}}\stackrel{\mathrm{def}}{=}\ensuremath{\mathbb{M}}_0\xrightarrow[]{\imath_0}\cdots\xrightarrow[]{\imath_{n-1}}\ensuremath{\mathbb{M}}_n\)</span> is a cellular type and <span class="math inline">\(f_k:\ensuremath{\mathbb{M}}_k\to\mathcal{U}\)</span> are type families on each skeleton such that all the triangles commute in the diagram:</em></p>
</div>
<p><img src="./8c08d9a05614ecaf9c700522b041d788835f9826.svg" alt="image" /></p>
<p>then we say</p>
<ul>
<li><p>The map <span class="math inline">\(f_k\)</span> is a <strong><span class="math inline">\(k\)</span>-bundle</strong> on <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span>.</p></li>
<li><p>The pair given by the map <span class="math inline">\(f_k\)</span> and the proof <span class="math inline">\(f_k\circ \imath_{k-1}=f_{k-1}\)</span> that <span class="math inline">\(f_k\)</span> extends <span class="math inline">\(f_{k-1}\)</span> is called a <strong><span class="math inline">\(k\)</span>-connection on the <span class="math inline">\((k-1)\)</span>-bundle <span class="math inline">\(f_{k-1}\)</span></strong>.</p></li>
</ul>
<p>Having the additional structure of a simplicial complex allows us to further define curvature, which is a local concept.</p>
<div class="mydef">
<p><strong>Definition 31</strong>. <em>If <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span> is the realization of a simplicial complex, such that for each pushout defining <span class="math inline">\(\ensuremath{\mathbb{M}}_k\)</span> we have the diagram</em></p>
</div>
<p><img src="./66243204ce483cec2a440c2cac60b81bca276e63.svg" alt="image" /></p>
<p>the outer square of which restricts on each face to the diagram</p>
<p><img src="./9cc073aff96cce4efad64201c6bde0864214a2d5.svg" alt="image" /></p>
<p>then we say the filler <span class="math inline">\(\flat_k\)</span> is called a <strong>flatness structure for the face <span class="math inline">\(m_k\)</span></strong>, and its ending path is called <strong>curvature at the face <span class="math inline">\(m_k\)</span></strong>.</p>
<p>The definitions can be digested to give</p>
<div id="lem:extend_faces" class="mylemma">
<p><strong>Lemma 32</strong>. <em>Given <span class="math inline">\(f_{k-1}\)</span> as above, a <span class="math inline">\(k\)</span>-connection exists if and only if there exists a flatness structure for each <span class="math inline">\(k\)</span>-face.</em></p>
</div>
<p>On a 2-dimensional cellular type <span class="math inline">\(\ensuremath{\mathbb{M}}\stackrel{\mathrm{def}}{=}\ensuremath{\mathbb{M}}_0\to\ensuremath{\mathbb{M}}_1\to\ensuremath{\mathbb{M}}_2\)</span> the terminology works out as follows: a 0-bundle on <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span> is a map <span class="math inline">\(T_0:\ensuremath{\mathbb{M}}_0\to\mathcal{U}\)</span>. A 1-connection on <span class="math inline">\(T_0\)</span> is an extension <span class="math inline">\(T_1:\ensuremath{\mathbb{M}}_1\to\mathcal{U}\)</span>. A 2-connection on <span class="math inline">\(T_1\)</span> is an extension <span class="math inline">\(T_2:\ensuremath{\mathbb{M}}_2\to\mathcal{U}\)</span>. Classically, a 1-extension that extends to a 2-connection is called <em>flat</em>.</p>
<h2 data-number="4.2" id="sec:localtriv"><span class="header-section-number">4.2</span> Flat connections as local trivializations</h2>
<p>This section can ve viewed as an extended remark. The observation we want to make is that the data of a 2-bundle on a realization of a 2-dimensional simplicial complex is related to the construction of local trivializations: the fiber at one vertex can be extended throughout a single face coherently, using the connection (the extension of the classifying map to the edges) to specify isomorphisms with the fibers at the other points, and the higher connections to establish commutativity between these.</p>
<p>We introduce a notation more suitable for the algebra of charts and overlaps: denote the fiber at <span class="math inline">\(v_i\)</span> by <span class="math inline">\(T_i\)</span> and denote transport along <span class="math inline">\(e_{ij}:v_i=v_j\)</span> by <span class="math inline">\(T_{ji}:T_i\to T_j\)</span>. The indices are ordered from right to left, which is compatible with function composition notation. Denote the inverse function by swapping indices: <span class="math inline">\(T_{ij}\stackrel{\mathrm{def}}{=}T_{ji}^{-1}\)</span>. Assume we have some fixed isomporphism <span class="math inline">\(T_i=S^1\)</span>, and to avoid composing everything with this function we will assume it is <span class="math inline">\(\ensuremath{\text{id}}\)</span>. In the diagram below we see the data arranged so that our bundles fibers are on the left, and the fiber of a trivial bundle is on the right.</p>
<p><img src="./70376f3361d450aa965b9346f361bb45457fe2af.svg" alt="image" /></p>
<p>The two middle squares commute definitionally. Call these two squares together the back face. The left triangle is filled by the flatness structure on the face, and the right triangular filler is trivial. There is also a filler needed for the front, i.e. the outer square. This requires proving that <span class="math inline">\(T_{ki}T_{ij}T_{jk}=\ensuremath{\text{id}}\)</span>, which is supplied by the flatness structure. There is also a 3-cell filling the interior of this prism, mapping the back face plus the left triangle filler to the front face plus the right triangle filler. These two faces both consist of one or two identities concatenated with the flatness structure, and so the 3-cell is definitional.</p>
<p>This relationship between flatness structure and local triviality of a chart can be compared to the classical result that on a paracompact, simply connected manifold (such as a single chart), a connection on a principal bundle is flat if and only if the bundle is trivial. See for example <span class="citation" data-cites="kobayashinomizu"> (<a href="#ref-kobayashinomizu" role="doc-biblioref">Kobayashi &amp; Nomizu, 1963</a>)</span> Corollary 9.2.</p>
<h2 data-number="4.3" id="the-tangent-bundle-of-the-sphere"><span class="header-section-number">4.3</span> The tangent bundle of the sphere</h2>
<p>We will build up a map <span class="math inline">\(T\)</span> out of <span class="math inline">\(\ensuremath{\mathbb{O}}_0\to\ensuremath{\mathbb{O}}_1\to\ensuremath{\mathbb{O}}\)</span> which is meant to be a model of the tangent bundle of the sphere. The link function will serve as our approximation to the tangent space. Taking the link of a vertex gives us a map from vertices to polygons, so the codomain is <span class="math inline">\(\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span>.</p>
<p>If <span class="math inline">\(\{b, r, g, o\}\)</span> are four vertices in <span class="math inline">\(\ensuremath{\mathbb{O}}\)</span>, the notation <span class="math inline">\(\llbracket{brgo}\rrbracket\)</span> refers to the 4-gon spanned by these four vertices and the edges between them.</p>
<div class="mydef">
<p><strong>Definition 33</strong>. <em><span class="math inline">\(T_0\stackrel{\mathrm{def}}{=}\mathop{\mathrm{\mathsf{link}}}:\ensuremath{\mathbb{O}}_0\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> is given by: <span class="math display">\[\begin{aligned}
\mathop{\mathrm{\mathsf{link}}}(w) &amp;= \llbracket{brgo}\rrbracket &amp; \mathop{\mathrm{\mathsf{link}}}(r) &amp;= \llbracket{wbyg}\rrbracket \\
\mathop{\mathrm{\mathsf{link}}}(y) &amp;= \llbracket{bogr}\rrbracket &amp; \mathop{\mathrm{\mathsf{link}}}(g) &amp;= \llbracket{wryo}\rrbracket \\
\mathop{\mathrm{\mathsf{link}}}(b) &amp;= \llbracket{woyr}\rrbracket &amp; \mathop{\mathrm{\mathsf{link}}}(o) &amp;= \llbracket{wgyb}\rrbracket
\end{aligned}\]</span></em></p>
<p><em>We chose these orderings for the vertices in the link, by visualizing standing at the given vertex as if it were the north pole, then looking south and enumerating the link in clockwise order, starting from <span class="math inline">\(w\)</span> if possible, else <span class="math inline">\(b\)</span>.</em></p>
</div>
<figure id="fig:triangle_of_equators">
<img src="./5223124258db050f495250e281a65d462714f6df.svg" />
<img src="./f8ad0fbb66a7ad51b3cb4db7a0f35ea8a8a56a4b.svg" />
<img src="./d3b55304a407c9ca808e19bf9256206529608d82.svg" />
<figcaption><span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> for the vertices <span class="math inline">\(w, b\)</span> and <span class="math inline">\(r\)</span>.</figcaption>
</figure>
<p>To extend <span class="math inline">\(T_0\)</span> to a function <span class="math inline">\(T_1\)</span> on the 1-skeleton we have some freedom. We will do something motivated by the figures we have been drawing of an octahedron embedded in 3-dimensional space. We will imagine how <span class="math inline">\(T_1\)</span> changes as we slide from point to point in the embedding shown in the figures. Sliding from <span class="math inline">\(w\)</span> to <span class="math inline">\(b\)</span> and tipping the link as we go, we see <span class="math inline">\(r\mapsto r\)</span> and <span class="math inline">\(o\mapsto o\)</span> because those lie on the axis of rotation. Then <span class="math inline">\(g\mapsto w\)</span> and <span class="math inline">\(b\mapsto y\)</span>.</p>
<div class="mydef">
<p><strong>Definition 34</strong>. <em>Define <span class="math inline">\(T_1:\ensuremath{\mathbb{O}}_1\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> on just the 1-skeleton by extending <span class="math inline">\(T_0\)</span> as follows: Transport away from <span class="math inline">\(w\)</span>:</em></p>
<ul>
<li><p><em><span class="math inline">\(T_1(wr):\llbracket{brgo}\rrbracket\mapsto \llbracket{bygw}\rrbracket\)</span> (<span class="math inline">\(b, g\)</span> fixed)</em></p></li>
<li><p><em><span class="math inline">\(T_1(wg):\llbracket{brgo}\rrbracket\mapsto \llbracket{wryo}\rrbracket\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(wb):\llbracket{brgo}\rrbracket\mapsto \llbracket{yrwo}\rrbracket\)</span> (<span class="math inline">\(r, o\)</span> fixed)</em></p></li>
<li><p><em><span class="math inline">\(T_1(wo):\llbracket{brgo}\rrbracket\mapsto \llbracket{bwgy}\rrbracket\)</span></em></p></li>
</ul>
<p><em>Transport away from <span class="math inline">\(y\)</span>:</em></p>
<ul>
<li><p><em><span class="math inline">\(T_1(yb):\llbracket{bogr}\rrbracket\mapsto \llbracket{woyr}\rrbracket\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(yr):\llbracket{bogr}\rrbracket\mapsto \llbracket{bygw}\rrbracket\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(yg):\llbracket{bogr}\rrbracket\mapsto \llbracket{yowr}\rrbracket\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(yo):\llbracket{bogr}\rrbracket\mapsto \llbracket{bwgy}\rrbracket\)</span></em></p></li>
</ul>
<p><em>Transport along the equator:</em></p>
<ul>
<li><p><em><span class="math inline">\(T_1(br):\llbracket{woyr}\rrbracket\mapsto \llbracket{wbyg}\rrbracket\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(rg):\llbracket{wbyg}\rrbracket\mapsto \llbracket{wryo}\rrbracket\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(go):\llbracket{wryo}\rrbracket\mapsto \llbracket{wgyb}\rrbracket\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(ob):\llbracket{wgyb}\rrbracket\mapsto \llbracket{woyr}\rrbracket\)</span></em></p></li>
</ul>
</div>
<p>It’s very important to be able to visualize what <span class="math inline">\(T_1\)</span> does to triangular paths such as <span class="math inline">\(wb\cdot br\cdot rw\)</span> (which circulates around the boundary of face <span class="math inline">\(wbr\)</span>). You can see it if you imagine Figure <a href="#fig:triangle_of_equators" data-reference-type="ref" data-reference="fig:triangle_of_equators">6</a> as the frames of a short movie. Or you can place your palm over the top of a cube and note where your fingers are pointing, then slide your hand to an equatorial face, then along the equator, then back to the top. The answer is: you come back rotated clockwise by a quarter-turn, which we saw in Definition <a href="#def:rotation" data-reference-type="ref" data-reference="def:rotation">27</a> where it is called <span class="math inline">\(\llbracket{R}\rrbracket\)</span>.</p>
<p>Now let’s extend <span class="math inline">\(T_1\)</span> to all of <span class="math inline">\(\ensuremath{\mathbb{O}}\)</span> by providing values for the eight faces. The face <span class="math inline">\(wbr\)</span> is a path from <span class="math inline">\(\ensuremath{\mathsf{refl}}_w\)</span> to the concatenation <span class="math inline">\(wb\cdot br\cdot rw\)</span>, and so the image of <span class="math inline">\(wbr\)</span> under the extended version of <span class="math inline">\(T_1\)</span> must be a homotopy from <span class="math inline">\(\ensuremath{\mathsf{refl}}_{T_1(w)}\)</span> to <span class="math inline">\(T_1(wb\cdot br\cdot rw)\)</span>. Here <em>there is no additional freedom</em>.</p>
<div id="def:octahedron_curvature" class="mydef">
<p><strong>Definition 35</strong>. <em>Define <span class="math inline">\(T_2:\ensuremath{\mathbb{O}}\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> by extending <span class="math inline">\(T_1\)</span> to the faces as follows (making use of <span class="math inline">\(H_R\)</span> from Lemma <a href="#lem:rotation" data-reference-type="ref" data-reference="lem:rotation">28</a>):</em></p>
<div class="multicols">
<p><em><span>2</span></em></p>
<ul>
<li><p><em><span class="math inline">\(T_2(wbr)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(wrg)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(wgo)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(ybo)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(yrb)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(ygr)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(yog)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(ybo)=H_R\)</span></em></p></li>
</ul>
</div>
<p><em>Defining these flatness structures suffices to define <span class="math inline">\(T_2\)</span> by Lemma <a href="#lem:extend_faces" data-reference-type="ref" data-reference="lem:extend_faces">32</a>.</em></p>
</div>
<h2 data-number="4.4" id="existence-of-connections"><span class="header-section-number">4.4</span> Existence of connections</h2>
<p>How confident can we be that we can always define a connection on an arbitrary combinatorial manifold? Two things make the octahedron example special: the link is a 4-gon at every vertex (as opposed to having a variable number of vertices), and every transport map extends to a rotation of the entire octahedron in 3-dimensional space. This imposed a coherence on the interactions of all the choices we made for the connection, which we can worry may not exist for more complex combinatorial data.</p>
<p>We know as a fact outside of HoTT that any combinatorial surface that has been realized as a triangulated surface embedded in 3-dimensional euclidean space can inherit the parallel transport entailed in the embedding. We could then approximate that data to arbitrary precision with enough subdivision of the fibers of <span class="math inline">\(T\)</span>.</p>
<p>What would a proof inside of HoTT look like? We will leave this as an open question.</p>
<h1 data-number="5" id="sec:vector_fields"><span class="header-section-number">5</span> Vector fields</h1>
<h2 data-number="5.1" id="definition"><span class="header-section-number">5.1</span> Definition</h2>
<p>Vector fields are sections of the tangent bundle of a manifold. We do not have a general theory of tangent bundles, even for 2-dimensional cellular types, since we cannot yet prove that connections always exist on the 1-skeleton. But if <span class="math inline">\(\ensuremath{\mathbb{M}}\stackrel{\mathrm{def}}{=}\ensuremath{\mathbb{M}}_o\to\ensuremath{\mathbb{M}}_1\to\ensuremath{\mathbb{M}}_1\)</span> is a cellular type, and <em>given</em> an extension <span class="math inline">\(T:\ensuremath{\mathbb{M}}\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> of the <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> function, we can consider the type of sections <span class="math inline">\(\prod_{x:\ensuremath{\mathbb{M}}_1}T_1(x)\)</span>.</p>
<p>In this section and for the remainder of the note, we will assume that the bundle is oriented, that is that the bundle is in fact a map <span class="math inline">\(T:\ensuremath{\mathbb{M}}\to\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span>, the type of <span class="math inline">\(S^1\)</span>-torsors.</p>
<div class="mydef">
<p><strong>Definition 36</strong>. <em>Given a 2-dimensional cellular type <span class="math inline">\(\ensuremath{\mathbb{M}}\stackrel{\mathrm{def}}{=}\ensuremath{\mathbb{M}}_o\to\ensuremath{\mathbb{M}}_1\to\ensuremath{\mathbb{M}}_1\)</span> equipped with type family <span class="math inline">\(T:\ensuremath{\mathbb{M}}\to\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> extending <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span>, a <strong>vector field</strong> on <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span> is a term <span class="math inline">\(X:\prod_{x:\ensuremath{\mathbb{M}}_1}T_1(x)\)</span>.</em></p>
</div>
<div class="mynote">
<p><strong>Remark 37</strong>. <em>The circle bundle extending <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> captures the <em>unit spheres</em> of the classical tangent bundle. A section of this bundle is therefore analogous to a classical <em>nonvanishing</em> vector field. To allow for classical vector fields <em>with zeroes</em>, we are limiting the section <span class="math inline">\(X\)</span> to the 1-skeleton of <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span>.</em></p>
</div>
<p>On the 0-skeleton <span class="math inline">\(X\)</span> picks a point in each link, i.e. a neighbor of each vertex. On a path <span class="math inline">\(p:x=_\ensuremath{\mathbb{M}}y\)</span>, <span class="math inline">\(X\)</span> assigns a dependent path over <span class="math inline">\(p\)</span>, which as we know is a term <span class="math inline">\(\pi:\mathsf{tr}(p)(X(x))=_{T y} X(y)\)</span>. We are very interested in working with the concatenation operation on dependent paths, which we call <em>swirling</em>.</p>
<h2 data-number="5.2" id="swirling-of-dependent-paths"><span class="header-section-number">5.2</span> Swirling of dependent paths</h2>
<p>Consider the vertex <span class="math inline">\(v_1:\ensuremath{\mathbb{M}}\)</span>, a face <span class="math inline">\(F\)</span> containing vertices <span class="math inline">\(v_1, v_2, v_3\)</span>, and the boundary path <span class="math inline">\(\ell\stackrel{\mathrm{def}}{=}e_{12}\cdot e_{23} \cdot e_{31}\)</span>. As we did in Section <a href="#sec:localtriv" data-reference-type="ref" data-reference="sec:localtriv">4.2</a>, denote <span class="math inline">\(T(v_i)\)</span> by <span class="math inline">\(T_i\)</span> and <span class="math inline">\(T(e_{ij})\)</span> by <span class="math inline">\(T_{ji}\)</span>. The indices are swapped so that we can have expressions that respect function-composition order, such as <span class="math inline">\(T_{32}T_{21}(X_1):T_3\)</span>. We retain the opposite convention (which we can call path-concatenation order) for the vector field, e.g. <span class="math inline">\(X_{ij}\)</span> which is a path in <span class="math inline">\(T_j\)</span>, as these are paths. Figure <a href="#fig:vector_transport" data-reference-type="ref" data-reference="fig:vector_transport">7</a> shows in tabular form how we concatenate the dependent paths over <span class="math inline">\(e_{12}\cdot e_{23}\cdot e_{31}\)</span>. Figure <a href="#fig:swirling" data-reference-type="ref" data-reference="fig:swirling">8</a> shows visually a possible example.</p>
<figure id="fig:vector_transport">
<img src="./bb11f9f39e0f1c386aa31e3fb73ab12874800ec0.svg" />
<figcaption>The data in each fiber as we move around a triangle with vertices indexed 1, 2, and 3. Double-lines indicate identity types between two types, and their labels are terms of this type. Items with one index are terms of some type at a vertex, and items with two indices are terms of a type on an edge.</figcaption>
</figure>
<p>As we traverse an edge, say <span class="math inline">\(e_{12}\)</span>, we get a path in <span class="math inline">\(T_2\)</span> which is the image of <span class="math inline">\(e_{12}\)</span> under <span class="math inline">\(X\)</span>, denoted <span class="math inline">\(X_{12}\)</span>. As we traverse an additional edge, <span class="math inline">\(X_{12}\)</span> is simply mapped to the next vertex by transport. The image is carried first to <span class="math inline">\(T_{32}(X_{12})\)</span> then to <span class="math inline">\(T_{13}\circ T_{32}(X_{12})\)</span>.</p>
<figure id="fig:swirling">
<img src="./a6e25bc70f2a767fd765bba487eec55bb7a66363.svg" />
<figcaption>A vector field swirling counterclockwise around a face, in a bundle of squares. Imagine that transport along <span class="math inline">\(e_{12}\)</span> does not rotate along the page, that transport along <span class="math inline">\(e_{23}\)</span> rotates counterclockwise by 90 degrees, and that transport along <span class="math inline">\(e_{31}\)</span> again does not rotate along the page. Thick black vectors are the vector field at a point. Thin vectors are transported once, dashed twice, and dotted three times. The vertices <span class="math inline">\(v_{ij}\)</span> are in the tangent fibers. If you have a colorized version of the document, the colors of the arrows correspond: the red edge produced the red edge in the fibers.</figcaption>
</figure>
<p>We wish to simplify expressions such as <span class="math inline">\(T_{13}T_{32}X_{12}\cdot T_{13}X_{23}\cdot X_{31}\)</span>, which take place in a particular fiber (<span class="math inline">\(T_1\)</span> in this case), and which depend on arranging for the endpoint of one segment to agree with the start of another. The simplification will empower us to easily perform calculations over the whole manifold, and to prove our main theorem <a href="#thm:total_index_total_curvature" data-reference-type="ref" data-reference="thm:total_index_total_curvature">[thm:total_index_total_curvature]</a>.</p>
<p>First we will choose a specific group that acts on all the fibers of <span class="math inline">\(T\)</span>. Recall from Section <a href="#subsec:torsors" data-reference-type="ref" data-reference="subsec:torsors">2.1</a> that given some basepoint <span class="math inline">\(b:\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> and a type <span class="math inline">\(T_i:\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span>, the group <span class="math inline">\(b=_{\mathrm{K}(\ensuremath{\mathbb{Z}},2)}b\)</span> acts on <span class="math inline">\(T_i\)</span>. Suppose we have a master basepoint <span class="math inline">\(m:\ensuremath{\mathbb{M}}\)</span>, and choose <span class="math inline">\(T_m:\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> as the basepoint, so that all the fibers of <span class="math inline">\(T\)</span> are now equipped with an action of <span class="math inline">\(T_m=_{\mathrm{K}(\ensuremath{\mathbb{Z}},2)}T_m\)</span>.</p>
<p>We will give this group a nickname for brevity. Recall the bundle <span class="math inline">\(\mathop{\mathrm{Aut}}T\)</span> from Section <a href="#sec:automorphisms" data-reference-type="ref" data-reference="sec:automorphisms">2.4</a>.</p>
<div class="mydef">
<p><strong>Definition 38</strong>. <em>Define <span class="math inline">\(\mathscr{G}\stackrel{\mathrm{def}}{=}\mathop{\mathrm{Aut}}T\)</span>, so that <span class="math inline">\(\mathscr{G}(m)=(T_m=_{\mathrm{K}(\ensuremath{\mathbb{Z}},2)}T_m)\)</span>. Since this group is commutative, we’ll denote the group operation by <span class="math inline">\(+:\mathscr{G}(m)\times\mathscr{G}(m)\to\mathscr{G}(m)\)</span>.</em></p>
</div>
<p>We need to derive two operations from the action <span class="math inline">\(\mathscr{G}(m)\)</span>.</p>
<div class="mydef">
<p><strong>Definition 39</strong>. <em>The map <span class="math inline">\(\ensuremath{\mathrm{pr}}_1\circ (\alpha, \ensuremath{\mathrm{pr}}_2)^{-1}:T_i\times T_i\to \mathscr{G}(m)\)</span> is called <strong>subtraction</strong>. It maps <span class="math inline">\((x,y)\)</span> to the unique term <span class="math inline">\(\delta:\mathscr{G}(m)\)</span> such that <span class="math inline">\(\alpha(\delta, x)=y\)</span>. For brevity we denote <span class="math inline">\(\ensuremath{\mathrm{pr}}_1\circ (\alpha, \ensuremath{\mathrm{pr}}_2)^{-1}(x,y)\)</span> by <span class="math inline">\(y-x\)</span>.</em></p>
</div>
<div id="lem:multpath" class="mylemma">
<p><strong>Lemma 40</strong>. <em>If <span class="math inline">\(G\)</span> is a higher group with multiplication <span class="math inline">\(\mu:G\times G\to G\)</span> and proof of commutativity <span class="math inline">\(\mathsf{is\_comm}:\prod_{a,b:G}\mu(a, b)=\mu(b, a)\)</span> then <span class="math inline">\(\mu\)</span> induces a function <span class="math inline">\(\mu_=:(x=_G y)\times (x&#39;=_G y&#39;)\to (\mu(x, x&#39;)=_G\mu(y,y&#39;))\)</span>.</em></p>
</div>
<div class="myproof">
<p>If <span class="math inline">\(p:x=_G y\)</span> and <span class="math inline">\(p&#39;:x&#39;=_G y&#39;\)</span>, then we can define <span class="math inline">\(\mu_=(p, p&#39;)\)</span> by concatenating the three paths <span class="math display">\[\begin{aligned}
\mu(x&#39;,p)&amp;:\mu(x&#39;, x)=_G\mu(x&#39;, y)\\
\mathsf{is\_comm}(x&#39;,y)&amp;:\mu(x&#39;,y)=_G\mu(y,x&#39;)\\
\mu(y, p&#39;)&amp;:\mu(y, x&#39;)=_G\mu(y, y&#39;).
\end{aligned}\]</span></p>
</div>
<p>Each fiber <span class="math inline">\(T_i\)</span> is pointed by <span class="math inline">\(X_i\)</span>, so we can define the map <span class="math inline">\(T_i\xrightarrow[]{-X_i}\mathscr{G}(m)\)</span>, and then give a name to the special term <span class="math inline">\(\rho_{ij}\stackrel{\mathrm{def}}{=}T_{ij}X_j - X_i\)</span>.</p>
<div id="lem:subtraction" class="mylemma">
<p><strong>Lemma 41</strong>. <em><span class="math inline">\(\rho_{ij}+\rho_{ji}=_{\mathscr{G}(m)}0\)</span>. </em></p>
</div>
<div class="myproof">
<p><span class="math display">\[\begin{aligned}
(X_i + \rho_{ij})+\rho_{ji} &amp;=_{T_i} T_{ij}X_j + \rho_{ji}&amp;&amp;\text{by definition of }\rho_{ij}\\
&amp;=_{T_i} T_{ij}(X_j + \rho_{ji})&amp;&amp;\text{by equivariance of transport} \\
&amp;=_{T_i} T_{ij}(T_{ji}(X_i))&amp;&amp;\text{by definition of }\rho_{ji}\\
&amp;=_{T_i} X_i&amp;&amp;\text{by definition of }T
\end{aligned}\]</span></p>
</div>
<p>Now we want to make use of the fact that dependent functions such as our vector field send <span class="math inline">\(\ensuremath{\mathsf{refl}}_{v_i}\)</span> to <span class="math inline">\(\ensuremath{\mathsf{refl}}_{X_i}\)</span> (by path induction, see for example <span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> Lemma 2.3.4), but mapped from <span class="math inline">\(X_i=_{T_i}X_i\)</span> to the non-dependent type <span class="math inline">\(0=_{\mathscr{G}(m)}0\)</span>.</p>
<p>We can obtain a path in <span class="math inline">\(\mathscr{G}(m)\)</span> from a dependent path by again subtracing the basepoint, e.g. <span class="math inline">\(\sigma_{ij}\stackrel{\mathrm{def}}{=}X_{ij}-X_j:0=_{\mathscr{G}(m)}T_{ji}X_i-X_j\)</span>, which type also has the name <span class="math inline">\(0=_{\mathscr{G}(m)}\rho_{ji}\)</span>. Notice the reversal in indices between <span class="math inline">\(\sigma_{ij}\)</span> and <span class="math inline">\(\rho_{ji}\)</span>, which reflects our opposite conventions for <span class="math inline">\(X_{ij}\)</span> and <span class="math inline">\(T_{ji}\)</span>.</p>
<div id="lem:cancellation" class="mylemma">
<p><strong>Lemma 42</strong>. <em>With the notation <span class="math inline">\(\sigma_{ij}\stackrel{\mathrm{def}}{=}X_{ij}-X_j\)</span>, and with addition of paths as in Lemma <a href="#lem:multpath" data-reference-type="ref" data-reference="lem:multpath">40</a>, we have <span class="math inline">\(\sigma_{ij}+\sigma_{ji}=_{0=_{\mathscr{G}(m)}0}\ensuremath{\mathsf{refl}}_0\)</span>.</em></p>
</div>
<div class="myproof">
<p>First we need to show that the sum is a loop, then we can prove that it is <span class="math inline">\(\ensuremath{\mathsf{refl}}_0\)</span>. The terms have these types: <span class="math display">\[\begin{aligned}
\sigma_{ij}&amp;:0=_{\mathscr{G}(m)}\rho_{ji}\\
\sigma_{ji}&amp;:0=_{\mathscr{G}(m)}\rho_{ij}
\end{aligned}\]</span> so when we add these paths with <span class="math inline">\(+\)</span> we obtain a path <span class="math inline">\(\sigma_{ij}+\sigma_{ji}:0=_{\mathscr{G}(m)} \rho_{ji}+\rho_{ij}\)</span> which by Lemma <a href="#lem:subtraction" data-reference-type="ref" data-reference="lem:subtraction">41</a> is <span class="math inline">\(0=_{\mathscr{G}(m)}0\)</span>. We compute <span class="math inline">\(+\)</span> using the concatenations in Lemma <a href="#lem:multpath" data-reference-type="ref" data-reference="lem:multpath">40</a>, which gives <span class="math display">\[\begin{aligned}
\sigma_{ij}+\sigma_{ji} &amp;: (0+0) \overset{\sigma_{ij}}{=\mathrel{\mkern-3mu}=} (0+\rho_{ji}) \overset{\mathsf{is\_comm}}{=\mathrel{\mkern-3mu}=}(\rho_{ji}+0) \overset{\rho_{ji}+\sigma_{ji}}{=\mathrel{\mkern-3mu}=}(\rho_{ji}+\rho_{ij})\,\,\big[\overset{\mathrm{Lemma~\ref{lem:subtraction}}}{=\mathrel{\mkern-3mu}=}0\big]\\
\sigma_{ij}+\sigma_{ji}&amp;=_{0=_{\mathscr{G}(m)}0} (X_{ij}-X_j)\cdot (\rho_{ji} + (X_{ji} - X_i))\\
&amp;=_{0=_{\mathscr{G}(m)}0} (X_{ij}-X_j)\cdot (T_{ji}(X_{ji} - X_i))\\
&amp;=_{0=_{\mathscr{G}(m)}0} \\
&amp;=_{0=_{\mathscr{G}(m)}0} \ensuremath{\mathsf{refl}}_0
\end{aligned}\]</span></p>
</div>
<div class="mynote">
<p><strong>Remark 43</strong>. <em>The classical argument of Hopf <span class="citation" data-cites="hopf"> (<a href="#ref-hopf" role="doc-biblioref">Hopf, 1983</a>)</span>, which is presented in more detail in the more readily available <span class="citation" data-cites="needham"> (<a href="#ref-needham" role="doc-biblioref">Needham, 2021</a>)</span>, makes an implicit assumption that we can concatenate two terms of different type such as <span class="math inline">\(X_{ij}\)</span> and <span class="math inline">\(X_{kl}\)</span>. The authors name such terms “change in angle across an edge.” The extra work we are doing in this section amounts to a partial formalization of this idea.</em></p>
</div>
<h2 data-number="5.3" id="an-example-vector-field-on-the-sphere"><span class="header-section-number">5.3</span> An example vector field on the sphere</h2>
<h1 data-number="6" id="sec:totals"><span class="header-section-number">6</span> The total construction</h1>
<p>We will place holonomy, flatness, and vector fields on the same footing, and combine them. We will prove the equivalance of the total curvature of a tangent bundle, and total index of a vector field. This is the key relationship in proving both the Gauss-Bonnet theorem and the Poincaré-Hopf theorem.</p>
<h2 data-number="6.1" id="index-of-the-vector-field"><span class="header-section-number">6.1</span> Index of the vector field</h2>
<div id="prop:eveq" class="myprop">
<p><strong>Proposition 44</strong>. <em>Given a polygon <span class="math inline">\(\mathbb{C}(n):\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> and a point <span class="math inline">\(b:\mathbb{C}(n)\)</span> the evaluation map <span class="math inline">\(\mathrm{ev}(b):\mathbb{C}(n)=_{\mathrm{K}(\ensuremath{\mathbb{Z}},2)}\mathbb{C}(n))\to \mathbb{C}(n)\)</span> is an equivalence.</em></p>
</div>
<div class="myproof">
<p>See <span class="citation" data-cites="buchholtz2023central"> (<a href="#ref-buchholtz2023central" role="doc-biblioref">Buchholtz <em>et al.</em>, 2023</a>)</span>.</p>
</div>
<p>Consider a 2-dimensional simplicial complex <span class="math inline">\(M\)</span>, its 2-dimensional realization <span class="math inline">\(\ensuremath{\mathbb{M}}=\ensuremath{\mathbb{M}}_0\to\ensuremath{\mathbb{M}}_1\to\ensuremath{\mathbb{M}}_2\)</span>. Consider a face <span class="math inline">\(F:M_2\)</span>, with <span class="math inline">\(m:\ensuremath{\mathbb{M}}\)</span> a vertex of <span class="math inline">\(F\)</span> and <span class="math inline">\(\partial F:\partial\Delta^2\to\ensuremath{\mathbb{M}}\)</span> the boundary loop of the face. We have accumulated the following constructions: <span class="math display">\[\begin{aligned}
\mathsf{tr}_F&amp;\stackrel{\mathrm{def}}{=}\mathsf{tr}(\partial F)&amp;&amp;:Tm=Tm\\
\flat_F&amp;\stackrel{\mathrm{def}}{=}\flat(\partial F)&amp;&amp;:\ensuremath{\text{id}}=_{Tm=Tm}\mathsf{tr}(\partial F)\\
X_F&amp;\stackrel{\mathrm{def}}{=}X(\partial F)&amp;&amp;:\mathsf{tr}(\partial F)(X(m))=_{Tm}X(m).\\
\end{aligned}\]</span> Define <span class="math inline">\(\sigma^X_F\stackrel{\mathrm{def}}{=}\mathrm{ev}(X(m))^{-1}(X_F)\)</span>, which is the automorphism of <span class="math inline">\(Tm\)</span> that performs the same total swirling that <span class="math inline">\(X_F\)</span> does, giving us <span class="math display">\[\begin{aligned}
\mathsf{tr}_F&amp;:Tm=Tm\\
\flat_F&amp;:\ensuremath{\text{id}}=_{Tm=Tm}\mathsf{tr}_F\\
\sigma^X_F&amp;:\mathsf{tr}_F=_{Tm=Tm}\ensuremath{\text{id}}.\\
\end{aligned}\]</span> These last two can be concatenated to make a loop. We can then obtain an integer by using the fact that <span class="math inline">\(\Omega_{Tm}(\mathrm{K}(\ensuremath{\mathbb{Z}},2))\simeq S^1\)</span>, plus the well known formula <span class="math inline">\(\Omega(S^1,\ensuremath{\mathsf{base}})\simeq\ensuremath{\mathbb{Z}}\)</span> (e.g. <span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> Corollary 8.1.10).</p>
<div class="mydef">
<p><strong>Definition 45</strong>. <em>The <strong>index of the vector field <span class="math inline">\(X\)</span> around the face <span class="math inline">\(F\)</span></strong> is the integer <span class="math inline">\(I^X_F\stackrel{\mathrm{def}}{=}\flat_F\cdot \sigma^X_F:\ensuremath{\text{id}}=_{Tm=Tm}\ensuremath{\text{id}}\)</span>.</em></p>
</div>
<p>We now have the following list of ingredients at a single face: <span class="math display">\[\label{eq:face_elements}
\begin{aligned}
\mathsf{tr}_F&amp;:Tm=Tm&amp;&amp;\text{the curvature}\\
\flat_F&amp;:\ensuremath{\text{id}}=_{Tm=Tm}\mathsf{tr}_F&amp;&amp;\text{the flatness}\\
\sigma^X_F&amp;:\mathsf{tr}_F=_{Tm=Tm}\ensuremath{\text{id}}&amp;&amp;\text{the swirling}\\
I^X_F&amp;:\ensuremath{\text{id}}=_{Tm=Tm}\ensuremath{\text{id}}&amp;&amp;\text{the index}.
\end{aligned}\]</span></p>
<h2 data-number="6.2" id="total-curvature-and-index-on-the-sphere"><span class="header-section-number">6.2</span> Total curvature and index on the sphere</h2>
<p>We have seen in Lemma <a href="#lem:multpath" data-reference-type="ref" data-reference="lem:multpath">40</a> how to sum paths in a commutative group such as <span class="math inline">\(Tm=Tm\)</span>. <span class="math display">\[\label{eq:tot_elements}
\begin{aligned}
\flat_\mathrm{tot}&amp; \stackrel{\mathrm{def}}{=}\sum_F\flat_F &amp;&amp;:\ensuremath{\text{id}}=_{Tm=Tm}\mathsf{tr}_\mathrm{tot}\\
\sigma^X_\mathrm{tot}&amp; \stackrel{\mathrm{def}}{=}\sum_F\sigma^X_F &amp;&amp;:\mathsf{tr}_\mathrm{tot}=_{Tm=Tm}\ensuremath{\text{id}}\\
I^X_\mathrm{tot}&amp; \stackrel{\mathrm{def}}{=}\sum_F I^X_F &amp;&amp;:\ensuremath{\text{id}}=_{Tm=Tm}\ensuremath{\text{id}}.
\end{aligned}\]</span> The assumption that the simplicial complex is oriented implies that each edge appears twice when traversing each path <span class="math inline">\(\partial F\)</span>, once in each direction. So Lemma <a href="#lem:cancellation" data-reference-type="ref" data-reference="lem:cancellation">42</a> proves the following</p>
<div id="prop:total_swirling" class="myprop">
<p><strong>Proposition 46</strong>. <em>The total swirling is 0.</em></p>
</div>
<div class="myproof">
<p><span class="math inline">\(\sum_F\sigma^X_F=\sum_{\mathrm{edge\ }e}\sigma(e)+\sigma(e^{-1})=_{Tm=Tm}\ensuremath{\mathsf{refl}}_0\)</span></p>
</div>
<div class="mythm">
<p><strong>Theorem 47</strong>. <em>The total flatness equals the total index.</em></p>
</div>
<div class="myproof">
<p>Follows directly from <span class="math inline">\(I^X_\mathrm{tot}\stackrel{\mathrm{def}}{=}\flat_\mathrm{tot}\cdot \sigma^X_\mathrm{tot}\)</span> and Proposition <a href="#prop:total_swirling" data-reference-type="ref" data-reference="prop:total_swirling">46</a>.</p>
</div>
<h2 data-number="6.3" id="future-directions"><span class="header-section-number">6.3</span> Future directions</h2>
<p>Euler characteristic. Chern-Weil theory. Atiyah bundle. Space of connections is contractible. Formalization.</p>
<p>The results of this note can be extended in many directions. There are higher-dimensional generalizations of Gauss-Bonnet, including the theory of characteristic classes and Chern-Weil theory (which links characteristic classes to connections and curvature). These would involve working with nonabelian groups like <span class="math inline">\(SO(n)\)</span> and sphere bundles. Results from gauge theory could be imported into HoTT, as well as results from surgery theory and other topological constructions that may be especially amenable to this discrete setting. Relationships with computer graphics and discrete differential geometry<span class="citation" data-cites="crane_ddg"> (<a href="#ref-crane_ddg" role="doc-biblioref">Crane <em>et al.</em>, 2013</a>)</span><span class="citation" data-cites="crane_connections"> (<a href="#ref-crane_connections" role="doc-biblioref">Crane, 2010</a>)</span> could be explored. Finally, a theory that reintroduces smoothness could allow more formal versions of the analogies explored here.</p>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-buchholtz2023central" class="csl-entry" role="listitem">
<span class="smallcaps">Buchholtz</span>, U., <span class="smallcaps">Christensen</span>, J.D., <span class="smallcaps">Flaten</span>, J.G.T., &amp; <span class="smallcaps">Rijke</span>, E. (2023) <a href="https://arxiv.org/abs/2301.02636">Central h-spaces and banded types</a>.
</div>
<div id="ref-crane_connections" class="csl-entry" role="listitem">
<span class="smallcaps">Crane</span>, K. (2010) <a href="http://resolver.caltech.edu/CaltechTHESIS:05282010-102307125">Discrete connections for geometry processing</a> (Master’s thesis).
</div>
<div id="ref-crane_ddg" class="csl-entry" role="listitem">
<span class="smallcaps">Crane</span>, K., <span class="smallcaps">Goes</span>, F. de, <span class="smallcaps">Desbrun</span>, M., &amp; <span class="smallcaps">Schröder</span>, P. (2013) <a href="{https://www.cs.cmu.edu/~kmcrane/Projects/DDG/}">Digital geometry processing with discrete exterior calculus</a>. <em>ACM SIGGRAPH 2013 courses</em>, <em>SIGGRAPH ’13</em>. New York, NY, USA: ACM.
</div>
<div id="ref-hopf" class="csl-entry" role="listitem">
<span class="smallcaps">Hopf</span>, H. (1983) <a href="https://api.semanticscholar.org/CorpusID:117042538">Differential geometry in the large: Seminar lectures, new york university, 1946 and stanford university, 1956</a>.
</div>
<div id="ref-kirby_siebenmann" class="csl-entry" role="listitem">
<span class="smallcaps">Kirby</span>, R.C. &amp; <span class="smallcaps">Siebenmann</span>, L.C. (1977) <em>Foundational essays on topological manifolds, smoothings, and triangulations</em>, Annals of mathematics studies. Princeton University Press.
</div>
<div id="ref-kobayashinomizu" class="csl-entry" role="listitem">
<span class="smallcaps">Kobayashi</span>, S. &amp; <span class="smallcaps">Nomizu</span>, K. (1963) <em><a href="https://books.google.com/books?id=wn4pAQAAMAAJ">Foundations of differential geometry</a></em>, Foundations of differential geometry. Interscience Publishers.
</div>
<div id="ref-myersgood" class="csl-entry" role="listitem">
<span class="smallcaps">Myers</span>, D.J. (2022) <a href="https://arxiv.org/abs/1908.08034">Good fibrations through the modal prism</a>.
</div>
<div id="ref-needham" class="csl-entry" role="listitem">
<span class="smallcaps">Needham</span>, T. (2021) <em><a href="https://books.google.com/books?id=Mc0QEAAAQBAJ">Visual differential geometry and forms: A mathematical drama in five acts</a></em>. Princeton University Press.
</div>
<div id="ref-egbert" class="csl-entry" role="listitem">
<span class="smallcaps">Rijke</span>, E. (2025) <em>Introduction to homotopy type theory</em>, Cambridge studies in advanced mathematics. Cambridge University Press.
</div>
<div id="ref-dcct" class="csl-entry" role="listitem">
<span class="smallcaps">Schreiber</span>, U. (2013) <a href="https://arxiv.org/abs/1310.7930v1">Differential cohomology in a cohesive infinity-topos</a>.
</div>
<div id="ref-sco" class="csl-entry" role="listitem">
<span class="smallcaps">Scoccola</span>, L. (2020) <a href="https://doi.org/10.1017/s0960129520000146">Nilpotent types and fracture squares in homotopy type theory</a>. <em>Mathematical Structures in Computer Science</em>, <strong>30</strong>, 511–544.
</div>
<div id="ref-talbott" class="csl-entry" role="listitem">
<span class="smallcaps">Talbott</span>, S. (1995) <em><a href="https://books.google.com/books?id=KcXaAAAAMAAJ">The future does not compute: Transcending the machines in our midst</a></em>. O’Reilly &amp; Associates.
</div>
<div id="ref-hottbook" class="csl-entry" role="listitem">
<span class="smallcaps">Univalent Foundations Program</span> (2013) <em>Homotopy type theory: Univalent foundations of mathematics</em>. Institute for Advanced Study: <a href="https://homotopytypetheory.org/book" class="uri">https://homotopytypetheory.org/book</a>.
</div>
<div id="ref-whitehead_triangulation" class="csl-entry" role="listitem">
<span class="smallcaps">Whitehead</span>, J.H.C. (1940) On <span><span class="math inline">\(C^1\)</span></span>-complexes. <em>Annals of Mathematics</em>, 809–824.
</div>
</div>
</body>
</html>

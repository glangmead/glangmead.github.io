<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2025-03-12" />
  <title>discrete_gauge_theory.tikzimg</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Libre+Baskerville&family=Quattrocento:wght@400">
  <style>
  body {
    font-family: Baskerville, 'Libre Baskerville', serif;
  }
  h1, h2, h3, h4, h5, h6, .abstract-title {
    font-family: Quattrocento, sans-serif;
    font-weight: bold;
    text-align: center;
  }
  img {
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
  </style>
  <p><span class="math inline">\(\newcommand{\textesh}{∫}\)</span> <span class="math inline">\(\newcommand{\ensuremath}{}\)</span></p>
  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#abstract" id="toc-abstract">Abstract</a></li>
<li><a href="#overview" id="toc-overview"><span class="toc-section-number">1</span> Overview</a></li>
<li><a href="#sec:torsors" id="toc-sec:torsors"><span class="toc-section-number">2</span> Torsors and principal bundles</a>
<ul>
<li><a href="#torsors" id="toc-torsors"><span class="toc-section-number">2.1</span> Torsors</a></li>
<li><a href="#bundles-of-eilenberg-mac-lane-spaces" id="toc-bundles-of-eilenberg-mac-lane-spaces"><span class="toc-section-number">2.2</span> Bundles of Eilenberg-Mac Lane spaces</a></li>
<li><a href="#sec:pathovers" id="toc-sec:pathovers"><span class="toc-section-number">2.3</span> Pathovers</a></li>
<li><a href="#sec:automorphisms" id="toc-sec:automorphisms"><span class="toc-section-number">2.4</span> The bundle of automorphisms</a></li>
</ul></li>
<li><a href="#sec:discrete_man" id="toc-sec:discrete_man"><span class="toc-section-number">3</span> Discrete manifolds</a>
<ul>
<li><a href="#abstract-simplicial-complexes" id="toc-abstract-simplicial-complexes"><span class="toc-section-number">3.1</span> Abstract simplicial complexes</a></li>
<li><a href="#higher-inductive-combinatorial-manifolds" id="toc-higher-inductive-combinatorial-manifolds"><span class="toc-section-number">3.2</span> Higher inductive combinatorial manifolds</a></li>
<li><a href="#sec:polygons" id="toc-sec:polygons"><span class="toc-section-number">3.3</span> Polygons</a></li>
<li><a href="#the-octahedron-model-of-the-sphere" id="toc-the-octahedron-model-of-the-sphere"><span class="toc-section-number">3.4</span> The octahedron model of the sphere</a></li>
</ul></li>
<li><a href="#sec:connections" id="toc-sec:connections"><span class="toc-section-number">4</span> Bundles, connections, and curvature</a>
<ul>
<li><a href="#definitions" id="toc-definitions"><span class="toc-section-number">4.1</span> Definitions</a></li>
<li><a href="#sec:localtriv" id="toc-sec:localtriv"><span class="toc-section-number">4.2</span> Connections as local trivializations</a></li>
<li><a href="#the-tangent-bundle-of-the-sphere" id="toc-the-tangent-bundle-of-the-sphere"><span class="toc-section-number">4.3</span> The tangent bundle of the sphere</a></li>
<li><a href="#existence-of-connections" id="toc-existence-of-connections"><span class="toc-section-number">4.4</span> Existence of connections</a></li>
</ul></li>
<li><a href="#sec:vector_fields" id="toc-sec:vector_fields"><span class="toc-section-number">5</span> Vector fields</a>
<ul>
<li><a href="#definition" id="toc-definition"><span class="toc-section-number">5.1</span> Definition</a></li>
<li><a href="#swirling" id="toc-swirling"><span class="toc-section-number">5.2</span> Swirling</a></li>
<li><a href="#an-example-vector-field-on-the-sphere" id="toc-an-example-vector-field-on-the-sphere">An example vector field on the sphere</a></li>
</ul></li>
</ul>
</nav>
<h1 class="unnumbered" id="abstract">Abstract</h1>
<p>Type families on higher inductive types such as pushouts can capture the homotopical properties of differential geometric constructions including connections, curvature, gauge transformations, and vector fields. We define a class of combinatorial pushouts, then define principal bundles, tangent bundles, connections, curvature, and vector fields on these. We draw inspiration in part from the young field of discrete differential geometry, and in part from the original classical proofs, which often make use of triangulations and other discrete arguments. We prove an equality relating the Gauss-Bonnet theorem to the Poincaré-Hopf theorem. We also attempt to map out future directions.</p>
<p><em></em></p>
<p>This thesis is dedicated to John Baez, Sean M. Carroll, Sabine Hossenfelder, and other communicators who are carrying the torch of science forward in the spirit of my hero Carl Sagan. I have followed you all for many years, and you have inspired me to continue my studies alongside my career. Thank you.</p>
<blockquote>
<p>“It is always ourselves we work on, whether we realize it or not. There is no other work to be done in the world.” — Stephen Talbott, <em>The Future Does Not Compute</em><span class="citation" data-cites="talbott"> (<a href="#ref-talbott" role="doc-biblioref">Talbott, 1995</a>)</span></p>
</blockquote>
<h1 data-number="1" id="overview"><span class="header-section-number">1</span> Overview</h1>
<p>The outline is that we will define</p>
<ul>
<li><p>principal bundles in Section <a href="#sec:torsors" data-reference-type="ref" data-reference="sec:torsors">2</a>,</p></li>
<li><p>simplicial complexes, and homotopical realizations of these in Section <a href="#sec:discrete_man" data-reference-type="ref" data-reference="sec:discrete_man">3</a>,</p></li>
<li><p>vector fields in Section <a href="#sec:vector_fields" data-reference-type="ref" data-reference="sec:vector_fields">5</a>,</p></li>
</ul>
<p>and observe emerging from those definitions the presence of</p>
<ul>
<li><p>connections and curvature in Section <a href="#sec:connections" data-reference-type="ref" data-reference="sec:connections">4</a>,</p></li>
<li><p>the index of a vector field in Section <a href="#sec:totals" data-reference-type="ref" data-reference="sec:totals">[sec:totals]</a>,</p></li>
</ul>
<p>and then define in Section <a href="#sec:totals" data-reference-type="ref" data-reference="sec:totals">[sec:totals]</a></p>
<ul>
<li><p>the total curvature, as in the Gauss-Bonnet theorem</p></li>
<li><p>the total index of a vector field, as in Poincaré-Hopf theorem,</p></li>
<li><p>and prove the equality of these to each other.</p></li>
</ul>
<p>We will build up an example of all of these structures on an octahedron model of the sphere, and compute its Euler characteristic of 2. We will not, however, be supplying a separate definition of Euler characteristic so as to truly reproduce the Gauss-Bonnet and Poincaré-Hopf theorems.</p>
<p>We will consider functions <span class="math inline">\(\ensuremath{\mathbb{M}}\to \mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> where <span class="math inline">\(\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> is the connected component in the universe of the Eilenberg-MacLane space <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},1)\)</span> which we will take to be <span class="math inline">\(S^1\)</span>, and where <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span> is a combinatorial manifold of dimension 2, which is a simplicial complex encoded in a higher inductive type, such that each vertex has a neighborhood that looks like a disk with a discrete circle boundary (i.e. a polygon). We can call terms <span class="math inline">\(C:\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> “mere circles.”</p>
<p>We will see in Section <a href="#sec:polygons" data-reference-type="ref" data-reference="sec:polygons">3.3</a> that <span class="math inline">\(\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> contains all the polygons. We will construct a map <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}:\ensuremath{\mathbb{M}}\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> that maps each vertex to the polygon consisting of its neighbors. Then we can consider the type of pointed mere circles <span class="math inline">\(\mathrm{EM_{\bullet}}(\ensuremath{\mathbb{Z}},1)\stackrel{\mathrm{def}}{=}\sum_{Y:\mathrm{EM}(\ensuremath{\mathbb{Z}},1)}Y\)</span> as well as the first projection that forgets the point. This is a univalent fibration (univalent fibrations are always equivalent to a projection of a type of pointed types to some connected component of the universe<span class="citation" data-cites="christensen_univalence"> (<a href="#ref-christensen_univalence" role="doc-biblioref">Christensen, 2015</a>)</span>). If we form the pullback</p>
<p><img src="./92c490bab129a4cb8dda6425574bf97743214ebe.svg" alt="image" /></p>
<p>then we have a bundle of mere circles, with total space given by the <span class="math inline">\(\sum_{}\)</span>-type construction. We will show that this is not quite a principal bundle, i.e. a bundle of torsors. Torsors are types with the additional structure of a free and transitive group action. But if <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> satisfies an additional property (amounting to an orientation) then the pullback is a principal fibration, i.e. <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> factors through a map <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},2)\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span>, where <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> is an Eilenberg-Mac Lane space.</p>
<p>We will argue that extending <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> to a function <span class="math inline">\(T\)</span> on paths can be thought of as constructing a connection, together with a “flatness structure,” i.e. a proof of flatness. Moreover, lifting <span class="math inline">\(T\)</span> to <span class="math inline">\(X:\ensuremath{\mathbb{M}}\to\mathrm{EM_{\bullet}}(\ensuremath{\mathbb{Z}},1)\)</span> can be thought of as a nonvanishing vector field. There will in general not be a total lift, just a lift on the 1-skeleton of <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span>. We will define the “index” of <span class="math inline">\(X\)</span> at a face.</p>
<p>We will then define a method for visiting all the faces of a manifold in order to form “totals” of local objects. We will examine the total curvature and the total index and prove that they are equal, and argue that they are equal to the usual Euler characteristic. This will simultaneously prove the Poincaré-Hopf theorem and Gauss-Bonnet theorem in 2 dimensions, for combinatorial manifolds. This is similar to the classical proof of Hopf<span class="citation" data-cites="hopf"> (<a href="#ref-hopf" role="doc-biblioref">Hopf, 1983</a>)</span>, presented in detail in Needham<span class="citation" data-cites="needham"> (<a href="#ref-needham" role="doc-biblioref">Needham, 2021</a>)</span>.</p>
<h1 data-number="2" id="sec:torsors"><span class="header-section-number">2</span> Torsors and principal bundles</h1>
<p>Differential geometry is the study of principal bundles and their automorphisms. Principal bundles are bundles of torsors, so we start there.</p>
<h2 data-number="2.1" id="torsors"><span class="header-section-number">2.1</span> Torsors</h2>
<div class="mydef">
<p><strong>Definition 1</strong>. <em>Let <span class="math inline">\(G\)</span> be a group with identity element <span class="math inline">\(e\)</span> (with the usual classical structure and properties). A <strong><span class="math inline">\(G\)</span>-set</strong> is a set <span class="math inline">\(X\)</span> equipped with a homomorphism <span class="math inline">\(\phi:(G,e)\to\mathop{\mathrm{Aut}}(X)\)</span>. If in addition we have a term <span class="math display">\[\mathsf{is\_torsor}:||X||_{-1}\times \prod_{x:X}\mathsf{is\_equiv}(\phi(-,x):(G,e)\to (X,x))\]</span> then we call this data a <strong><span class="math inline">\(G\)</span>-torsor</strong>. Denote the type of <span class="math inline">\(G\)</span>-torsors by <span class="math inline">\(BG\)</span>.</em></p>
</div>
<p>If <span class="math inline">\((X,\phi),(Y,\psi):BG\)</span> then a <span class="math inline">\(G\)</span>-equivariant map is a function <span class="math inline">\(f:X\to Y\)</span> such that <span class="math inline">\(f(\phi(g,x))=\psi(g,f(x))\)</span>. Denote the type of <span class="math inline">\(G\)</span>-equivariant maps by <span class="math inline">\(X\to_G Y\)</span>.</p>
<div class="mylemma">
<p><strong>Lemma 2</strong>. <em>There is a natural equivalence <span class="math inline">\((X=_{BG}Y) \simeq (X\to_G Y)\)</span>.0◻</em></p>
</div>
<p>Denote by <span class="math inline">\(*\)</span> the torsor given by <span class="math inline">\(G\)</span> actions on its underlying set by left-translation. This serves as a basepoint for <span class="math inline">\(BG\)</span> and we have a group isomorphism <span class="math inline">\(\Omega BG\simeq G\)</span>.</p>
<div class="mylemma">
<p><strong>Lemma 3</strong>. <em>A <span class="math inline">\(G\)</span>-set <span class="math inline">\((X,\phi)\)</span> is a <span class="math inline">\(G\)</span>-torsor if and only if there merely exists a <span class="math inline">\(G\)</span>-equivariant equivalence <span class="math inline">\(*\to_G X\)</span>.0◻</em></p>
</div>
<div class="mycor">
<p><strong>Corollary 4</strong>. <em>The pointed type <span class="math inline">\((BG,*)\)</span> is a <span class="math inline">\(\mathrm{K}(G,1)\)</span>.0◻</em></p>
</div>
<p>In particular, to classify principal <span class="math inline">\(S^1\)</span>-bundles we map into the space <span class="math inline">\(\mathrm{K}(S^1, 1)\)</span>, a type of torsors of the circle. Since <span class="math inline">\(S^1\)</span> is a <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},1)\)</span>, we have <span class="math inline">\(\mathrm{K}(S^1,1)\simeq\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span>.</p>
<h2 data-number="2.2" id="bundles-of-eilenberg-mac-lane-spaces"><span class="header-section-number">2.2</span> Bundles of Eilenberg-Mac Lane spaces</h2>
<p>We find it illuminating to look also at the slightly more general classifying space of <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},1)\)</span>-bundles, that is bundles whose fiber are equivalent to <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},1)\)</span>. We can understand very well when these are in fact bundles of circle torsors, which will in turn shed light on orientation in this setting.</p>
<p>We will follow Scoccola<span class="citation" data-cites="sco"> (<a href="#ref-sco" role="doc-biblioref">Scoccola, 2020</a>)</span>. We will state the definitions and theorems for a general <span class="math inline">\(\mathrm{K}(G,n)\)</span> but we will be focusing on <span class="math inline">\(n=1\)</span> in this note.</p>
<div class="mydef">
<p><strong>Definition 5</strong>. <em>Let <span class="math inline">\(\mathrm{EM}(G,n)\stackrel{\mathrm{def}}{=}\mathop{\mathrm{BAut}}(\mathrm{K}(G,n))\stackrel{\mathrm{def}}{=}\sum_{Y:\mathcal{U}}||Y\simeq \mathrm{K}(G,n)||_{-1}\)</span>. A <strong><span class="math inline">\(\mathrm{K}(G,n)\)</span>-bundle</strong> on a type <span class="math inline">\(M\)</span> is the fiber of a map <span class="math inline">\(M\to\mathrm{EM}(G,n)\)</span>.</em></p>
</div>
<p>Scoccola uses two self-maps on the universe: suspension followed by <span class="math inline">\((n+1)\)</span>-truncation <span class="math inline">\(||\Sigma||_{n+1}\)</span> and forgetting a point <span class="math inline">\(F_\bullet\)</span> to form the composition <span class="math display">\[\mathrm{EM}(G,n)\xrightarrow[]{||\Sigma||_{n+1}} \mathrm{EM}_{\bullet\bullet}(G,n+1)\xrightarrow[]{F_\bullet}\mathrm{EM_{\bullet}}(G,n+1)\]</span> from types to types with two points (north and south), to pointed types (by forgetting the south point).</p>
<div class="mydef">
<p><strong>Definition 6</strong>. <em>Given <span class="math inline">\(f:M\to\mathrm{EM}(G,n)\)</span>, the <strong>associated action of <span class="math inline">\(M\)</span> on <span class="math inline">\(G\)</span></strong>, denoted by <span class="math inline">\(f_\bullet\)</span> is defined to be <span class="math inline">\(f_\bullet=F_\bullet\circ||\Sigma||_{n+1}\circ f\)</span>.</em></p>
</div>
<div class="mythm">
<p><strong>Theorem 7</strong>. <em>(Scoccola<span class="citation" data-cites="sco"> (<a href="#ref-sco" role="doc-biblioref">Scoccola, 2020</a>)</span> Proposition 2.39). A <span class="math inline">\(\mathrm{K}(G,n)\)</span> bundle <span class="math inline">\(f:M\to\mathrm{EM}(G,n)\)</span> is equivalent to a map in <span class="math inline">\(M\to\mathrm{K}(G,n+1)\)</span>, and so is a principal fibration, if and only if the associated action <span class="math inline">\(f_\bullet\)</span> is contractible.</em></p>
</div>
<p>Let’s relate this to <em>orientation</em>. Note that the obstruction in the theorem is about a map into <span class="math inline">\(\mathrm{EM_{\bullet}}(G,n+1)\)</span> and further note that <span class="math inline">\(\mathrm{EM_{\bullet}}(G,n)\simeq \mathrm{K}(\mathop{\mathrm{Aut}}G,1)\)</span> (independent of <span class="math inline">\(n\)</span>). The theorem says that the data of a map into <span class="math inline">\(\mathrm{EM}(G,n)\)</span> factors into data about a map into <span class="math inline">\(\mathrm{K}(G,n+1)\)</span> and one into <span class="math inline">\(\mathrm{K}(\mathop{\mathrm{Aut}}G,1)\)</span>. Informally, <span class="math inline">\(\mathrm{EM}(G,n)\)</span> is a little too large to be a <span class="math inline">\(K(G,n+1)\)</span>, as it includes data about automorphisms of <span class="math inline">\(G\)</span>.</p>
<p>In the special case of <span class="math inline">\(\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> the conditions of the theorem are met when <span class="math inline">\(f_\bullet:M\to\mathrm{K}(\mathop{\mathrm{Aut}}\ensuremath{\mathbb{Z}}, 1)\)</span> is contractible. <span class="math inline">\(\mathop{\mathrm{Aut}}\ensuremath{\mathbb{Z}}\)</span> consists of the <span class="math inline">\(\ensuremath{\mathbb{Z}}/2\ensuremath{\mathbb{Z}}\)</span> worth of outer automorphisms given by multiplication by <span class="math inline">\(\pm 1\)</span>. If we look at the fiber sequence <span class="math display">\[\mathrm{K}(S^1, 1)\to \mathop{\mathrm{BAut}}S^1\to \mathrm{K}(\mathop{\mathrm{Aut}}\ensuremath{\mathbb{Z}}, 1)\]</span> we see the automorphisms of the circle as an extension of the group of automorphisms that are homotopic to the identity (which are the torsorial actions) by the group that sends the loop in <span class="math inline">\(S^1\)</span> to its inverse. This is another way to see that a map <span class="math inline">\(f:M\to \mathop{\mathrm{BAut}}S^1\simeq \mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> factors through <span class="math inline">\(\mathrm{K}(S^1, 1)\simeq \mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> if and only if the composition to <span class="math inline">\(\mathrm{K}(\mathop{\mathrm{Aut}}\ensuremath{\mathbb{Z}},1)\)</span> is trivial. This amounts to a choice of loop-direction for all the circles, and so deserves the name “<span class="math inline">\(f\)</span> is <em>oriented</em>.” In addition the map <span class="math inline">\(\mathop{\mathrm{BAut}}S^1\to \mathrm{K}(\mathop{\mathrm{Aut}}\ensuremath{\mathbb{Z}}, 1)\)</span> deserves to be called the first Stiefel-Whitney class of <span class="math inline">\(f\)</span>, and the requirement here is that it vanishes. This point of view is discussed in Schreiber<span class="citation" data-cites="dcct"> (<a href="#ref-dcct" role="doc-biblioref">Schreiber, 2013</a>)</span> (starting with Example 1.2.138) and in Myers<span class="citation" data-cites="myersgood"> (<a href="#ref-myersgood" role="doc-biblioref">Myers, 2022</a>)</span>.</p>
<div class="mynote">
<p><strong>Remark 8</strong>. <em>Bundles of oriented mere circles are principal, but this fact does not hold for bundles of higher-dimensional spheres. Since this note will focus on 2-dimensional oriented manifolds we will be making use of this coincidence.</em></p>
</div>
<h2 data-number="2.3" id="sec:pathovers"><span class="header-section-number">2.3</span> Pathovers</h2>
<p>Suppose we have <span class="math inline">\(T:M\to\mathcal{U}\)</span> and <span class="math inline">\(P\stackrel{\mathrm{def}}{=}\sum_{x:M}Tx\)</span>. We adopt a convention of naming objects in <span class="math inline">\(M\)</span> with Latin letters, and the corresponding structures in <span class="math inline">\(P\)</span> with Greek letters. Recall that if <span class="math inline">\(p:a=_M b\)</span> then <span class="math inline">\(T\)</span> acts on <span class="math inline">\(p\)</span> with what’s called the <em>action on paths</em>, denoted <span class="math inline">\(\ensuremath{\mathsf{ap}}(T)(p):Ta=Tb\)</span>. This is a path in the codomain, which in this case is a type of types. Type theory also provides a function called <em>transport</em>, denoted <span class="math inline">\(\mathsf{tr}(p):Ta\to Tb\)</span> which acts on the fibers of <span class="math inline">\(P\)</span>. <span class="math inline">\(\mathsf{tr}(p)\)</span> is a function, acting on the terms of the types <span class="math inline">\(Ta\)</span> and <span class="math inline">\(Tb\)</span>, and univalence tells us this is the isomorphism corresponding to <span class="math inline">\(\ensuremath{\mathsf{ap}}(T)(p)\)</span>.</p>
<p>Type theory also tells us that paths in <span class="math inline">\(P\)</span> are given by pairs of paths: a path <span class="math inline">\(p:a=_M b\)</span> in the base, and a pathover <span class="math inline">\(\pi:\mathsf{tr}(p)(\alpha)=_{Tb}\beta\)</span> between <span class="math inline">\(\alpha:Ta\)</span> and <span class="math inline">\(\beta:Tb\)</span> in the fibers. We can’t directly compare <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> since they are of different types, so we apply transport to one of them. We say <span class="math inline">\(\pi\)</span> lies over <span class="math inline">\(p\)</span>. See Figure <a href="#fig:pathovers" data-reference-type="ref" data-reference="fig:pathovers">1</a>.</p>
<figure id="fig:pathovers">
<embed src="figs/pathovers.pdf" style="width:2.77778in" />
<figcaption>A path <span class="math inline">\(\pi\)</span> over the path <span class="math inline">\(p\)</span> in the base involves the transport function.</figcaption>
</figure>
<p>Lastly we want to recall that in the presence of a section <span class="math inline">\(X:M\to P\)</span> there is a dependent generalization of <span class="math inline">\(\ensuremath{\mathsf{ap}}\)</span> called <span class="math inline">\(\mathsf{apd}\)</span>: <span class="math inline">\(\mathsf{apd}(X)(p):\mathsf{tr}(p)(X(a))=X(b)\)</span> which is a pathover between the two values of the section over the basepoints of the path <span class="math inline">\(p\)</span>.</p>
<h2 data-number="2.4" id="sec:automorphisms"><span class="header-section-number">2.4</span> The bundle of automorphisms</h2>
<div class="mydef">
<p><strong>Definition 9</strong>. <em>Again, suppose we have <span class="math inline">\(T:M\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> and <span class="math inline">\(P\stackrel{\mathrm{def}}{=}\sum_{x:M}Tx\)</span>. Then we can form the type family <span class="math inline">\(\mathop{\mathrm{Aut}}T:M\to\mathcal{U}\)</span> given by <span class="math inline">\(\mathop{\mathrm{Aut}}T\stackrel{\mathrm{def}}{=}\lambda(x:M)\to (Tx=Tx)\)</span>. The total space <span class="math inline">\(\mathop{\mathrm{Aut}}P\stackrel{\mathrm{def}}{=}\sum_{x:M}(Tx=Tx)\)</span>, which is a bundle of groups, is called the <strong>automorphism bundle</strong> or the <strong>gauge bundle</strong> and sections <span class="math inline">\(\prod_{x:M}(Tx=Tx)\)</span>, which are homotopies <span class="math inline">\(T\sim T\)</span>, are called <strong>automorphisms of <span class="math inline">\(P\)</span></strong> or <strong>gauge transformations</strong>.</em></p>
</div>
<p>If the automorphism group of the fibers is commutative then the automorphism bundle is trivial.</p>
<div id="lem:gauge_triv" class="mylemma">
<p><strong>Lemma 10</strong>. <em>Suppose <span class="math inline">\(M\)</span> is connected and we have a point <span class="math inline">\(m:M\)</span>. Then we have a trivialization <span class="math inline">\(\mathop{\mathrm{Aut}}P\simeq M\times (Tm=Tm)\)</span>. This is equivalent to saying the map <span class="math inline">\(\mathop{\mathrm{Aut}}T\)</span> is equivalent to a constant map.</em></p>
</div>
<div class="myproof">
<p>We will produce a term <span class="math inline">\(\tau:\prod_{x:M}((Tx=Tx)\xrightarrow[]{\simeq}(Tm=Tm))\)</span>. Suppose we have a path <span class="math inline">\(p:x=_M m\)</span>, and define <span class="math inline">\(\tau x=\mathsf{tr}(p)\)</span>. Transport in the family <span class="math inline">\(\mathop{\mathrm{Aut}}T\)</span> is given by concatenation (see <span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> Theorem 2.11.3), i.e. <span class="math inline">\(\mathsf{tr}(p)(f)=T(p)^{-1}\cdot f\cdot T(p)\)</span>. To show that <span class="math inline">\(\tau\)</span> is independent of the choice of <span class="math inline">\(p\)</span>, suppose we have <span class="math inline">\(p,q:x=_M m\)</span>. Then <span class="math inline">\(\mathsf{tr}(p\cdot q^{-1})=T(p\cdot q^{-1})^{-1}\cdot -\cdot T(p\cdot q^{-1})\)</span> which is conjugation in the commutative group <span class="math inline">\(Tx=Tx\)</span>, hence is the identity. This proves that <span class="math inline">\(\mathsf{tr}(p)=\mathsf{tr}(q)\)</span>.</p>
</div>
<h1 data-number="3" id="sec:discrete_man"><span class="header-section-number">3</span> Discrete manifolds</h1>
<p>We will remind ourselves of the definition of a classical simplicial complex, in sets. Then we will create a higher type from the data of a complex, using pushouts. The type will both imitate the structure of the set-based complex and will contain explicit maps into it from the sets of the complex.</p>
<h2 data-number="3.1" id="abstract-simplicial-complexes"><span class="header-section-number">3.1</span> Abstract simplicial complexes</h2>
<div class="mydef">
<p><strong>Definition 11</strong>. <em>An <strong>abstract simplicial complex <span class="math inline">\(M\stackrel{\mathrm{def}}{=}[M_0,\ldots,M_n]\)</span> of dimension <span class="math inline">\(n\)</span></strong> is an ordered list consisting of a set <span class="math inline">\(M_0\)</span> of vertices, and for each <span class="math inline">\(0&lt;k\leq n\)</span> a set <span class="math inline">\(M_k\)</span> of subsets of <span class="math inline">\(M_0\)</span> of cardinality <span class="math inline">\(k+1\)</span>, such that any <span class="math inline">\((j+1)\)</span>-element subset of <span class="math inline">\(M_k\)</span> is an element of <span class="math inline">\(M_j\)</span>. The elements of <span class="math inline">\(M_k\)</span> are called <strong><span class="math inline">\(k\)</span>-faces</strong>. Denote by <span class="math inline">\(\mathsf{SimpCompSet_n}\)</span> the type of abstract simplicial complexes of dimension <span class="math inline">\(n\)</span> (where the suffix <span class="math inline">\(\mathsf{Set}\)</span> reminds us that this is a type of sets). Let <span class="math inline">\(M_{\leq k}= [M_0,\ldots,M_k]\)</span> and note that <span class="math inline">\(M_{\leq n}=M\)</span>. We call <span class="math inline">\(M_{\leq k}\)</span> the <strong><span class="math inline">\(k\)</span>-skeleton</strong> of <span class="math inline">\(M\)</span>, and it is a (<span class="math inline">\(k\)</span>-)complex in its own right. <span class="math inline">\(M\)</span> is automatically equipped with a chain of inclusions of the skeleta <span class="math inline">\(M_0\hookrightarrow M_{\leq 1}\hookrightarrow\cdots\hookrightarrow M_{\leq n}=M\)</span>. A <strong>morphism</strong> <span class="math inline">\(f\)</span> from <span class="math inline">\(M=[M_0,\ldots,M_m]\)</span> to <span class="math inline">\(N=[N_0,\ldots,N_n]\)</span> is a function on vertices <span class="math inline">\(f:M_0\to N_0\)</span> such that for any face of <span class="math inline">\(M\)</span> the image under <span class="math inline">\(f\)</span> is a face of <span class="math inline">\(N\)</span>.</em></p>
</div>
<div class="mydef">
<p><strong>Definition 12</strong>. <em>Let <span class="math inline">\(\Delta^n\)</span> be the standard <span class="math inline">\(n\)</span>-simplex in <span class="math inline">\(\ensuremath{\mathbb{R}}^n\)</span> given by <span class="math inline">\(\{x_1,\ldots,x_n|\sum_i x_i\leq 1\}\)</span>. Let <span class="math inline">\(M:\mathsf{SimpCompSet_n}\)</span>. The <strong>geometric realization</strong> <span class="math inline">\([{M}]:\mathsf{Top}\)</span> of <span class="math inline">\(M\)</span> in the category of topological spaces is given inductively as follows: <span class="math inline">\([M_0]=M_0\)</span>, and given <span class="math inline">\([M_{\leq k-1}]\)</span> we form <span class="math inline">\([M_{\leq k}]\)</span> by the pushout in sets</em></p>
</div>
<p><img src="./5f850668df693060e5d39dd1a2a43ad51b673e1e.svg" alt="image" /></p>
<p>which attaches each <span class="math inline">\(k\)</span>-simplex by taking the convex hull of the appropriate <span class="math inline">\(k+1\)</span> points in <span class="math inline">\([M_{\leq k-1}]\)</span>. The collection of vertical maps on the right gives a sequence of inclusion maps of skeleta <span class="math inline">\([M_0]\xrightarrow[]{i_1}[M_{\leq 1}]\xrightarrow[]{i_2}\cdots\xrightarrow[]{i_n}[M_{\leq n}]=[{M}]\)</span>.</p>
<div id="def:link" class="mydef">
<p><strong>Definition 13</strong>. <em>In an abstract simplicial complex <span class="math inline">\(M\)</span> of dimension <span class="math inline">\(n\)</span>, the <strong>link</strong> of a vertex <span class="math inline">\(v\)</span> is the <span class="math inline">\(n-1\)</span>-dimensional subcomplex containing every face <span class="math inline">\(m\in M_{n-1}\)</span> such that <span class="math inline">\(v\notin m\)</span> and <span class="math inline">\(m\cup v\)</span> is an <span class="math inline">\(n\)</span>-face of <span class="math inline">\(M\)</span>. </em></p>
</div>
<p>The link is easier to understand as all the neighboring vertices of <span class="math inline">\(v\)</span> and the subcomplex containing these. See for example Figure <a href="#fig:link" data-reference-type="ref" data-reference="fig:link">2</a>.</p>
<figure id="fig:link">
<img src="./77310e6013360f123738b3984e7a97ecabc90011.svg" />
<figcaption>The link of <span class="math inline">\(v\)</span> in this complex consists of the vertices <span class="math inline">\(\{a,b,c,d,e,f\}\)</span> and the edges <span class="math inline">\(\{ab,bc,cd,de,ef,fa\}\)</span>, forming a hexagon.</figcaption>
</figure>
<div class="mydef">
<p><strong>Definition 14</strong>. <em>A <strong>combinatorial manifold</strong> (or <strong>combinatorial triangulation</strong>) of dimension <span class="math inline">\(n\)</span> is a simplicial complex of dimension <span class="math inline">\(n\)</span> such that the link of every vertex is a <strong>simplicial sphere</strong> of dimension <span class="math inline">\(n-1\)</span> (meaning its geometric realization is homeomorphic to an <span class="math inline">\(n-1\)</span>-sphere). Denote by <span class="math inline">\(\mathsf{CombMfdSet_n}\)</span> the type of combinatorial manifolds of dimension <span class="math inline">\(n\)</span> (which the notation again reminds us are sets).</em></p>
</div>
<p>In a 2-dimensional combinatorial manifold the link is a polygon. See Figure <a href="#fig:sphere_triangulation" data-reference-type="ref" data-reference="fig:sphere_triangulation">3</a> for some examples of 2-dimensional combinatorial manifolds of genus 0, 1, and 3.</p>
<p>A classical 1940 result of Whitehead, building on Cairn, states that every smooth manifold admits a combinatorial triangulation<span class="citation" data-cites="whitehead_triangulation"> (<a href="#ref-whitehead_triangulation" role="doc-biblioref">Whitehead, 1940</a>)</span>. So it appears reasonably well motivated to study this class of objects. See for example the classic book by Kirby and Siebenmann<span class="citation" data-cites="kirby_siebenmann"> (<a href="#ref-kirby_siebenmann" role="doc-biblioref">Kirby &amp; Siebenmann, 1977</a>)</span>. There are important examples in four dimensions of topological manifolds that do not have any smoothness structure or triangulation. These will be out of reach of the theory we are building.</p>
<figure id="fig:sphere_triangulation">
<p><embed src="figs/triangulated_sphere.pdf" style="width:1.38889in" /> <img src="figs/Torus-triang.png" style="width:1.38889in" alt="image" /> <embed src="figs/triangulated_genus3.pdf" style="width:1.38889in" /></p>
<figcaption>Combinatorial triangulations of a sphere, torus, and 3-holed torus. Sphere created with the tool <code>stripy</code>; torus from Wikipedia (<a href="https://commons.wikimedia.org/w/index.php?curid=30856793">By Ag2gaeh</a> - Own work, CC BY-SA 3.0.); 3-holed torus from Wikipedia (<a href="https://commons.wikimedia.org/wiki/File:Tri-brezel.svg">By Ag2gaeh</a> - Own work, CC BY-SA 3.0.)</figcaption>
</figure>
<h2 data-number="3.2" id="higher-inductive-combinatorial-manifolds"><span class="header-section-number">3.2</span> Higher inductive combinatorial manifolds</h2>
<p>Instead of building a set <span class="math inline">\([{M}]:\mathsf{Top}\)</span>, we can realize the simplicial complex as a (higher) type by forming a sequence of <em>homotopy</em> pushouts. For example in dimension 1 we could take the triangle with vertices <span class="math inline">\(\{v_1, v_2, v_3\}\)</span> and edges <span class="math inline">\(\{e_{12}, e_{23}, e_{31}\}\)</span> and form a polygon <span class="math inline">\(C_3\)</span>:</p>
<p><img src="./fb70e8046f0ef3601a17feb7806703caf5425365.svg" alt="image" /></p>
<p>The left vertical map expresses the connectivity between the edges and vertices in the set-based complex. The right vertical map <span class="math inline">\(*_1\)</span> provides a hub point for each edge, and the homotopy <span class="math inline">\(h_1\)</span> provides the spokes that connect the hub to the vertices. So in contrast to a geometric realization, the 1-dimensional cells in the HoTT sense are generated by the filler homotopy.</p>
<p>In dimension 2 we could fill in maps from <span class="math inline">\(C_3\)</span> into our higher type by adding faces (hence reusing the object we just built above):</p>
<p><img src="./59159619e9738f2cedd3c95491c185b941b34336.svg" alt="image" /></p>
<p>The types <span class="math inline">\(C_3\)</span> and <span class="math inline">\(\ensuremath{\mathbb{M}}_1\)</span> are 1-types, <span class="math inline">\(\ensuremath{\mathbb{M}}_2\)</span> is a 2-type, and the rest are sets. The map <span class="math inline">\(\partial_0\)</span> maps each pair <span class="math inline">\((e, S^0)\)</span> to the pair of points this edge connects.</p>
<p>The <span class="math inline">\(h_i\)</span> are the proofs of commutativity, and the two squares are also both homotopy pushouts. Note that the pushouts could be re-expressed as HIT constructors.</p>
<p>Whereas in geometric realization we use both <span class="math inline">\(\Delta^i\)</span> and <span class="math inline">\(\partial\Delta^i\)</span> to attach simplices, in this homotopy picture we need an explicit construction of “<span class="math inline">\(\partial\Delta^i\)</span>” as a type equivalent to an <span class="math inline">\(i-1\)</span>-dimensional sphere and the filling of this sphere with <span class="math inline">\(i\)</span>-dimensional stuff has moved into the proof of commutativity. So in dimension <span class="math inline">\(n\)</span> the picture would be</p>
<p><img src="./060f84a40591ae2293f7dffd08753bc1ed0a2948.svg" alt="image" /></p>
<div id="def:higher_realization" class="mydef">
<p><strong>Definition 15</strong>. <em>A <strong>higher realization</strong> <span class="math inline">\(\llbracket{M}\rrbracket\)</span> corresponding to an abstract simplicial complex <span class="math inline">\(M:\mathsf{SimpCompSet_n}\)</span> consists of</em></p>
<ol>
<li><p><em><span class="math inline">\(n+1\)</span> types <span class="math inline">\(\ensuremath{\mathbb{M}}_0,\ldots,\ensuremath{\mathbb{M}}_n\)</span> where <span class="math inline">\(\ensuremath{\mathbb{M}}_0\stackrel{\mathrm{def}}{=}M_0\)</span>,</em></p></li>
<li><p><em><span class="math inline">\(n\)</span> spans <span class="math inline">\({\ensuremath{\mathbb{M}}_{i}}\xleftarrow[]{\partial_{i}}{M_{i+1}\times S^{i}}\xrightarrow[]{\ensuremath{\mathrm{pr}}_1}{M_{i+1}}\)</span>, <span class="math inline">\(i=1,\ldots,n\)</span>, where <span class="math inline">\(S^i\)</span> is a HoTT <span class="math inline">\(i\)</span>-sphere and <span class="math inline">\(\partial_i\)</span> are called <strong>attachment maps</strong>,</em></p></li>
<li><p><em><span class="math inline">\(n\)</span> pushout squares from each span to <span class="math inline">\(\ensuremath{\mathbb{M}}_{i+1}\)</span>, with induced maps <span class="math inline">\(\imath_i:\ensuremath{\mathbb{M}}_i\to\ensuremath{\mathbb{M}}_{i+1}\)</span>, <span class="math inline">\(*_{i+1}:M_{i+1}\to\ensuremath{\mathbb{M}}_{i+1}\)</span> and proof of commutativity <span class="math inline">\(h_{i+1}\)</span>.</em></p></li>
</ol>
<p><em>A <strong>cellular type</strong> is a sequence <span class="math inline">\(\ensuremath{\mathbb{M}}_0\xrightarrow[]{\imath_0}\ensuremath{\mathbb{M}}_1\xrightarrow[]{\imath_1}\cdots\xrightarrow[]{\imath_{n-1}}\ensuremath{\mathbb{M}}_n\)</span>, together with a proof of existence of some <span class="math inline">\(\llbracket{M}\rrbracket\)</span> inducing this sequence. We define forgetful maps to the bare types with <span class="math inline">\(\llbracket{M}\rrbracket_i\stackrel{\mathrm{def}}{=}\ensuremath{\mathbb{M}}_i\)</span>.</em></p>
</div>
<p>We intend for the <span class="math inline">\(\partial_i\)</span> to be isomorphisms between a boundary of a simplex in <span class="math inline">\(\ensuremath{\mathbb{M}}_i\)</span> and the <span class="math inline">\(i\)</span>-sphere. To avoid spending too much time above dimension 2, we will leave the <span class="math inline">\(\partial_i\)</span> underspecified in general. For 2-dimensional complexes we will see how the gluing can be done for triangles.</p>
<h2 data-number="3.3" id="sec:polygons"><span class="header-section-number">3.3</span> Polygons</h2>
<p>Recall the 1-type <span class="math inline">\(C_3\)</span> that we just constructed from the triangle with vertex set <span class="math inline">\(\{v_1, v_2, v_3\}\)</span> and edge set <span class="math inline">\(\{e_{12}, e_{23}, e_{31}\}\)</span>:</p>
<p><img src="./fb70e8046f0ef3601a17feb7806703caf5425365.svg" alt="image" /></p>
<p>We will use a notational shorthand for polygons:</p>
<div class="mydef">
<p><strong>Definition 16</strong>. <em>If <span class="math inline">\(C_n\)</span> is a simplicial complex with <span class="math inline">\(C_{n,0}=\{v_1, \ldots, v_n\}\)</span> and edges <span class="math inline">\(e_1=\{v_1,v_2\}\)</span>, <span class="math inline">\(\ldots\)</span>, <span class="math inline">\(e_{n-1}=\{v_{n-1}, v_n\}\)</span>, and <span class="math inline">\(e_n=\{v_n, v_0\}\)</span>, we call <span class="math inline">\(C_n\)</span> a <strong>polygon</strong> or <strong><span class="math inline">\(n\)</span>-gon</strong>. We can refer to <span class="math inline">\(C_n\)</span> by <span class="math inline">\(v_1 v_2\cdots v_n\)</span>, to <span class="math inline">\([{C_n}]\)</span> by <span class="math inline">\([{v_1 v_2\cdots v_n}]\)</span> and to <span class="math inline">\(\llbracket{C_n}\rrbracket\)</span> by <span class="math inline">\(\llbracket{v_1 v_2\cdots v_n}\rrbracket\)</span>. Forgetting the pushouts and vertices, we denote the bare 1-type by <span class="math inline">\(\llbracket{v_1 v_2\cdots v_n}\rrbracket_1\)</span>.</em></p>
</div>
<p>We also have the special circle type that is not the realization of a simplicial complex, but is nevertheless the natural basepoint in the type of polygons, as we shall see:</p>
<div class="mydef">
<p><strong>Definition 17</strong>. <em>The higher inductive type <span class="math inline">\(S^1\)</span>, also denoted <span class="math inline">\(\llbracket{C_1}\rrbracket_1\)</span> for convenience, despite <span class="math inline">\(C_1\)</span> not being a simplicial complex, has constructors: <span class="math display">\[\begin{aligned}
S^1&amp;:\mathsf{Type}\\
\mathsf{base}&amp;:S^1\\
\mathsf{loop}&amp;:\mathsf{base}=\mathsf{base}
\end{aligned}\]</span></em></p>
</div>
<div id="lem:addpoints" class="mylemma">
<p><strong>Lemma 18</strong>. <em><span class="math inline">\(\llbracket{C_2}\rrbracket_1\simeq \llbracket{C_1}\rrbracket_1\)</span> and in fact <span class="math inline">\(\llbracket{C_n}\rrbracket_1\simeq \llbracket{C_{n-1}}\rrbracket_1\)</span>.</em></p>
</div>
<div class="myproof">
<p>(Compare to <span class="citation" data-cites="hottbook"> (<a href="#ref-hottbook" role="doc-biblioref">Univalent Foundations Program, 2013</a>)</span> Lemma 6.5.1.) In the case of <span class="math inline">\(\llbracket{C_1}\rrbracket_1\)</span> we will denote its constructors by <span class="math inline">\(\ensuremath{\mathsf{base}}\)</span> and <span class="math inline">\(\ensuremath{\mathsf{loop}}\)</span>. For <span class="math inline">\(\llbracket{C_2}\rrbracket_1\)</span> we will denote the points by <span class="math inline">\(v_1, v_2\)</span> and the edges by <span class="math inline">\(\ell_{12}, r_{21}\)</span>. For <span class="math inline">\(\llbracket{C_3}\rrbracket_1\)</span> and higher we will denote the points by <span class="math inline">\(v_1,\ldots,v_n\)</span> and the edges by <span class="math inline">\(e_{i,j}:v_i=v_j\)</span> where <span class="math inline">\(j=i+1\)</span> except for <span class="math inline">\(e_{n,1}\)</span>.</p>
<p>First we will define <span class="math inline">\(f:\llbracket{C_2}\rrbracket_1\to \llbracket{C_1}\rrbracket_1\)</span> and <span class="math inline">\(g:\llbracket{C_1}\rrbracket_1\to \llbracket{C_2}\rrbracket_1\)</span>, then prove they are inverses. <span class="math display">\[\begin{aligned}
f(v_1)=f(v_2)&amp;=\ensuremath{\mathsf{base}}&amp;\quad g(\ensuremath{\mathsf{base}})&amp;=v_1\\
f(\ell_{12})&amp;=\ensuremath{\mathsf{loop}}&amp;\quad g(\ensuremath{\mathsf{loop}})&amp;=\ell_{12}\cdot r_{21}\\
f(r_{21}) &amp;= \ensuremath{\mathsf{refl}}_{\ensuremath{\mathsf{base}}}&amp; &amp; \\
\end{aligned}\]</span></p>
<p>We need to show that <span class="math inline">\(f\circ g\sim \ensuremath{\text{id}}_{\llbracket{C_1}\rrbracket_1}\)</span> and <span class="math inline">\(g\circ f\sim\ensuremath{\text{id}}_{\llbracket{C_2}\rrbracket_1}\)</span>. Think of <span class="math inline">\(f\)</span> as sliding <span class="math inline">\(v_2\)</span> along <span class="math inline">\(r_{21}\)</span> to coalesce with <span class="math inline">\(v_1\)</span>. This may help understand why the unfortunately intricate proof is working.</p>
<p>Recall that given functions <span class="math inline">\(\phi,\psi:A\to B\)</span> between two arbitrary types we can form a type family of paths <span class="math inline">\(\alpha:A\to\mathcal{U}\)</span> by <span class="math inline">\(\alpha(a)\stackrel{\mathrm{def}}{=}(\phi(a)=_B\psi(a))\)</span>. Transport in this family is given by concatenation as follows (compare Lemma <a href="#lem:gauge_triv" data-reference-type="ref" data-reference="lem:gauge_triv">10</a>), where <span class="math inline">\(p:a=_A a&#39;\)</span> and <span class="math inline">\(q:\phi(a)=\psi(a)\)</span> (see Figure <a href="#fig:transport_family_of_paths" data-reference-type="ref" data-reference="fig:transport_family_of_paths">4</a>): <span class="math display">\[\mathsf{tr}(p)(q) = \phi(p)^{-1}\cdot q\cdot \psi(p)\]</span> which gives a path in <span class="math inline">\(\phi(a&#39;)=\psi(a&#39;)\)</span> by connecting dots between the terms <span class="math inline">\(\phi(a&#39;), \phi(a), \psi(a), \psi(a&#39;)\)</span>. This relates a would-be homotopy <span class="math inline">\(\phi\sim\psi\)</span> specified at a single point, to a point at the end of a path. We will use this to help construct such homotopies.</p>
<figure id="fig:transport_family_of_paths">

<figcaption>Transport along <span class="math inline">\(p\)</span> in the fibers of a family of paths. The fiber over <span class="math inline">\(a\)</span> is <span class="math inline">\(\phi(a)=\psi(a)\)</span> where <span class="math inline">\(\phi,\psi:A\to B\)</span>.</figcaption>
</figure>
<p>We need terms <span class="math inline">\(p:\prod_{a:\llbracket{C_1}\rrbracket_1}f(g(a))=a\)</span> and <span class="math inline">\(q:\prod_{a:\llbracket{C_2}\rrbracket_1}g(f(a))=a\)</span>. We will proceed by induction, defining appropriate paths on point constructors and then checking a condition on path constructors that confirms that the built-in transport of these type families respects the definition on points.</p>
<p>Looking first at <span class="math inline">\(g\circ f\)</span>, which shrinks <span class="math inline">\(r_{21}\)</span>, we have the following data to work with: <span class="math display">\[\begin{aligned}
g(f(v_1))=g(f(v_2))&amp;=v_1\\
g(f(\ell_{12}))&amp;=\ell_{12}\cdot r_{21}\\
g(f(r_{21})) &amp;= \ensuremath{\mathsf{refl}}_{v_1}.
\end{aligned}\]</span> We then need to supply a homotopy from this data to <span class="math inline">\(\ensuremath{\text{id}}_{\llbracket{C_2}\rrbracket_1}\)</span>, which consists of a section and pathovers over <span class="math inline">\(\llbracket{C_2}\rrbracket_1\)</span>: <span class="math display">\[\begin{aligned}
p_1&amp;:g(f(v_1))=v_1\\
p_2&amp;:g(f(v_1))=v_2\\
H_\ell&amp;:\mathsf{tr}(\ell_{12})(p_1)=p_2\\
H_r&amp;:\mathsf{tr}(r_{21})(p_2)=p_1.
\end{aligned}\]</span> which simplifies to <span class="math display">\[\begin{aligned}
p_1&amp;:v_1=v_1\\
p_2&amp;:v_1=v_2\\
H_\ell&amp;:g(f(\ell_{12}))^{-1}\cdot p_1\cdot \ell_{12}=p_2\\
H_r&amp;:=g(f(r_{21}))^{-1}\cdot p_2\cdot r_{21}= p_1
\end{aligned}\]</span> and then to <span class="math display">\[\begin{aligned}
p_1&amp;:v_1=v_1\\
p_2&amp;:v_1=v_2\\
H_\ell&amp;:(\ell_{12}\cdot r_{21})^{-1}\cdot p_1\cdot \ell_{12}=p_2\\
H_r&amp;:\ensuremath{\mathsf{refl}}_{v_1}\cdot p_2\cdot r_{21}= p_1
\end{aligned}\]</span></p>
<p>To solve all of these constraints we can choose <span class="math inline">\(p_1\stackrel{\mathrm{def}}{=}\ensuremath{\mathsf{refl}}_{v_1}\)</span>, which by consulting either <span class="math inline">\(H_\ell\)</span> or <span class="math inline">\(H_r\)</span> requires that we take <span class="math inline">\(p_2\stackrel{\mathrm{def}}{=}{r_{21}}^{-1}\)</span>.</p>
<p>Now examining <span class="math inline">\(f\circ g\)</span>, we have <span class="math display">\[\begin{aligned}
f(g(\ensuremath{\mathsf{base}}))&amp;=\ensuremath{\mathsf{base}}&amp;\\
f(g(\ensuremath{\mathsf{loop}}))&amp;=f(\ell_{12}\cdot r_{21})=\ensuremath{\mathsf{loop}}
\end{aligned}\]</span> and so we have an easy proof that this is the identity.</p>
<p>The proof of the more general case <span class="math inline">\(\llbracket{C_n}\rrbracket_1 \simeq \llbracket{C_{n-1}}\rrbracket_1\)</span> is very similar. Take the maps <span class="math inline">\(f:\llbracket{C_n}\rrbracket_1\to \llbracket{C_{n-1}}\rrbracket_1\)</span>, <span class="math inline">\(g:\llbracket{C_{n-1}}\rrbracket_1\to \llbracket{C_n}\rrbracket_1\)</span> to be <span class="math display">\[\begin{aligned}
f(v_i)=v_i&amp;\quad(i=1,\ldots,n-1) &amp; g(v_i)&amp;=v_i&amp;\quad(i=1,\ldots,n-1)\\
f(v_n)=v_1&amp;\quad&amp; g(e_{i,i+1})&amp;=e_{i,i+1}&amp;\quad(i=1,\ldots,n-2)\\
f(e_{i,i+1})=e_{i,i+1}&amp;\quad(i=1,\ldots,n-1)&amp; g(e_{n-1,1})&amp;=e_{n-1,n}\cdot e_{n,1}&amp;\\
f(e_{n-1,n})=e_{n-1,1}&amp;&amp;&amp;&amp;\\
f(e_{n,1})=\ensuremath{\mathsf{refl}}_{v_1}&amp;&amp;&amp;&amp;
\end{aligned}\]</span> where <span class="math inline">\(f\)</span> should be thought of as shrinking <span class="math inline">\(e_{n,1}\)</span> so that <span class="math inline">\(v_n\)</span> coalesces into <span class="math inline">\(v_1\)</span>.</p>
<p>The proof that <span class="math inline">\(g\circ f\sim\ensuremath{\text{id}}_{\llbracket{C_n}\rrbracket_1}\)</span> proceeds as follows: the composition is definitionally the identity except <span class="math display">\[\begin{aligned}
g(f(v_n))&amp;=v_1\\
g(f(e_{n-1,n}))&amp;=e_{n-1,n}\cdot e_{n,1}\\
g(f(e_{n,1}))&amp;= \ensuremath{\mathsf{refl}}_{v_1}.
\end{aligned}\]</span> Guided by our previous experience we choose <span class="math inline">\({e_{n,1}}^{-1}:g(f(v_n))=v_n\)</span>, and define the pathovers by transport.</p>
<p>The proof that <span class="math inline">\(f\circ g\sim\ensuremath{\text{id}}_{\llbracket{C_{n-1}}\rrbracket_1}\)</span> requires only noting that <span class="math inline">\(f(g(e_{n-1,1}))=f(e_{n-1,n}\cdot e_{n,1})=e_{n-1,1}\cdot\ensuremath{\mathsf{refl}}_{v_1}=e_{n-1,1}\)</span>.</p>
</div>
<div id="cor:gon" class="mycor">
<p><strong>Corollary 19</strong>. <em>All polygons are equivalent to <span class="math inline">\(S^1\)</span>, i.e. we have terms <span class="math inline">\(e_n:||\llbracket{C_n}\rrbracket_1=S^1||_{-1}\)</span>, and hence we have constructed a map from the unit type <span class="math inline">\((\llbracket{C_n}\rrbracket_1, e_n):\mathbb{1}\to \mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span>.</em></p>
</div>
<div class="myproof">
<p>We can add <span class="math inline">\(n-1\)</span> points to <span class="math inline">\(S^1\)</span> and use Lemma <a href="#lem:addpoints" data-reference-type="ref" data-reference="lem:addpoints">18</a>.</p>
</div>
<p>If we cyclically permute the vertices of a simplicial polygon, what map is induced on the realization and the bare types within?</p>
<div id="def:rotation" class="mydef">
<p><strong>Definition 20</strong>. <em>Let <span class="math inline">\(R:[{v_1\cdots v_n}]\to [{v_1\cdots v_n}]\)</span> (for “rotation”) be the map sending <span class="math inline">\(v_i\mapsto v_{i+1}\)</span> and <span class="math inline">\(v_n\mapsto v_0\)</span>. This map clearly preserves the edges, and so is a map of simplicial complexes, and extends to a map <span class="math inline">\(\llbracket{R}\rrbracket:\llbracket{v_1\cdots v_n}\rrbracket\to \llbracket{v_1\cdots v_n}\rrbracket\)</span>.</em></p>
</div>
<p>A key point is that simplicial maps form a set, but the homotopical realization <span class="math inline">\(\llbracket{R}\rrbracket\)</span> has a path to the identity:</p>
<div id="lem:rotation" class="mylemma">
<p><strong>Lemma 21</strong>. <em>The map <span class="math inline">\(\llbracket{R}\rrbracket_1: \llbracket{v_1\cdots v_n}\rrbracket_1\to \llbracket{v_1\cdots v_n}\rrbracket_1\)</span> is connected to <span class="math inline">\(\ensuremath{\mathsf{refl}}_{\llbracket{v_1\cdots v_n}\rrbracket_1}\)</span> by a homotopy <span class="math inline">\(H_R:\prod_{x:\llbracket{v_1\cdots v_n}\rrbracket_1}\llbracket{R}\rrbracket_1(x)=x\)</span>.</em></p>
</div>
<div class="myproof">
<p>If <span class="math inline">\(x\)</span> is a vertex, take <span class="math inline">\(H_R(x)\)</span> to be the obvious unique edge back to the starting vertex. This extends in the obvious functorial way to edges.</p>
</div>
<h2 data-number="3.4" id="the-octahedron-model-of-the-sphere"><span class="header-section-number">3.4</span> The octahedron model of the sphere</h2>
<p>We will create our first combinatorial surface, an octahedron. We will not prove that this type is equivalent to the sphere. In <span class="math inline">\(\mathsf{SimpCompSet_n}\)</span> the combinatorial data of the faces can be represented with a <em>Hasse diagram</em>, which shows the poset of inclusions in a graded manner, with a special top and bottom element. We give an octahedron in Figure <a href="#fig:hasse_octohedron" data-reference-type="ref" data-reference="fig:hasse_octohedron">5</a>. The names of the vertices are short for white, yellow, blue, red, green, and orange, the colors of the faces of a Rubik’s cube. The octahedron is the dual of the cube, with each vertex corresponding to a face.</p>
<figure id="fig:hasse_octohedron">
<img src="./41cfa9cf6e056c83cc79c2711f6ee0981317076b.svg" />
<figcaption>Hasse diagram of an octahedron <span class="math inline">\(O\)</span>. The row of singletons is <span class="math inline">\(O_0\)</span> and above it are <span class="math inline">\(O_1\)</span> and <span class="math inline">\(O_2\)</span>.</figcaption>
</figure>
<p>We can realize <span class="math inline">\(O_0\to O_1\to O\)</span> as a cellular type denoted <span class="math inline">\(\ensuremath{\mathbb{O}}_0\to \ensuremath{\mathbb{O}}_1\to \ensuremath{\mathbb{O}}\)</span>.</p>
<div class="mylemma">
<p><strong>Lemma 22</strong>. <em>There is an equivalence <span class="math inline">\(\ensuremath{\mathbb{O}}\simeq S^2\)</span>.</em></p>
</div>
<div class="myproof">
<p>Omitted.</p>
</div>
<figure>
<img src="./ff7f3a1e9ad288427a1f8fe354f5e5e4112b62fd.svg" />
<figcaption>The type <span class="math inline">\(\ensuremath{\mathbb{O}}\)</span> which has 6 points, 12 1-paths, 8 2-paths.</figcaption>
</figure>
<h1 data-number="4" id="sec:connections"><span class="header-section-number">4</span> Bundles, connections, and curvature</h1>
<p>Bundles are simply maps into the universe. By using the extra cellular structure and the even more detailed combinatorial structure of higher realizations, we can identify inside of HoTT some additional classical definitions.</p>
<h2 data-number="4.1" id="definitions"><span class="header-section-number">4.1</span> Definitions</h2>
<p>Having the cellular structure allows us to define bundles and connections.</p>
<div id="def:connection" class="mydef">
<p><strong>Definition 23</strong>. <em>If <span class="math inline">\(\ensuremath{\mathbb{M}}_0\xrightarrow[]{\imath_0}\cdots\xrightarrow[]{\imath_{n-1}}\ensuremath{\mathbb{M}}_n\)</span> is a cellular type and <span class="math inline">\(f_k:\ensuremath{\mathbb{M}}_k\to\mathcal{U}\)</span> are type families on each skeleton such that all the triangles commute in the diagram:</em></p>
</div>
<p><img src="./4248418ece56a3374e60d5b33f6f04b27a542a4e.svg" alt="image" /></p>
<p>then we say</p>
<ul>
<li><p>The map <span class="math inline">\(f_k\)</span> is a <strong><span class="math inline">\(k\)</span>-bundle</strong> on <span class="math inline">\(\ensuremath{\mathbb{M}}_k\)</span>.</p></li>
<li><p>The pair given by the map <span class="math inline">\(f_k\)</span> and the proof <span class="math inline">\(f_k\circ \imath_{k-1}=f_{k-1}\)</span> that <span class="math inline">\(f_k\)</span> extends <span class="math inline">\(f_{k-1}\)</span> is called a <strong><span class="math inline">\(k\)</span>-connection on the bundle <span class="math inline">\(f_{k-1}\)</span></strong>.</p></li>
</ul>
<p>Having the additional structure of a simplicial complex allows us to further define curvature, which is a local concept.</p>
<div class="mydef">
<p><strong>Definition 24</strong>. <em>If <span class="math inline">\(\llbracket{M}\rrbracket\)</span> is a higher combinatorial <span class="math inline">\(n\)</span>-manifold as above, and such that for each pushout defining <span class="math inline">\(\ensuremath{\mathbb{M}}_k\)</span> we have the diagram</em></p>
</div>
<p><img src="./92dfaac67612e213064cfae51c59f46850aa749c.svg" alt="image" /></p>
<p>the outer square of which restricts on each face to the diagram</p>
<p><img src="./6a8c96007c33ec0e200dd4ac004232ec3cfc4e28.svg" alt="image" /></p>
<p>then we say the filler <span class="math inline">\(\flat_k\)</span> is called a <strong>flatness structure for the face <span class="math inline">\(m_k\)</span></strong>, or, to align with classical terms, the <strong>curvature at the face <span class="math inline">\(m_k\)</span></strong>, and its ending path is called the <strong>holonomy around the face</strong>.</p>
<p>The definitions can be digested to give</p>
<div id="lem:extend_faces" class="mylemma">
<p><strong>Lemma 25</strong>. <em>Given <span class="math inline">\(f_{k-1}\)</span> as above, a <span class="math inline">\(k\)</span>-connection exists if and only if there exists a flatness structure for each <span class="math inline">\(k\)</span>-face.</em></p>
</div>
<h2 data-number="4.2" id="sec:localtriv"><span class="header-section-number">4.2</span> Connections as local trivializations</h2>
<p>This section can ve viewed as an extended remark. The observation we want to make is that the data of a <span class="math inline">\(1\)</span>-bundle is related to the construction of local trivializations: the fiber at one vertex can be extended throughout a single face coherently, using the connection (the extension of the classifying map to the edges) to specify isomorphisms with the fibers at the other points, and the higher connections to establish commutativity between these.</p>
<p>We introduce a notation more suitable for the algebra of charts and overlaps: denote by <span class="math inline">\(g_{ji}:Ti\to Tj\)</span> the isomorphism of transport along an edge <span class="math inline">\(e_{ij}:i=_\ensuremath{\mathbb{M}}j\)</span>. The indices are ordered from right to left, which is compatible with function composition notation. Denote the inverse function by swapping indices: <span class="math inline">\(g_{ij}\stackrel{\mathrm{def}}{=}g_{ji}^{-1}\)</span>. Assume we have some fixed isomporphism <span class="math inline">\(T_i=S^1\)</span>, and to avoid composing everything with this function we will assume it is <span class="math inline">\(\ensuremath{\text{id}}\)</span>. In the diagram below we see the data arranged so that our bundles fibers are on the left, and the fiber of a trivial bundle is on the right.</p>
<p><img src="./a7b6e29e62fa31b96fd6da3e7621be2ccd076268.svg" alt="image" /></p>
<p>The two middle squares commute definitionally. Call these two squares together the back face. The left triangular filler is filled by the flatness structure on the face, and the right triangular filler is trivial. There is also a filler needed for the front, i.e. the outer square. This requires proving that <span class="math inline">\(g_{ki}g_{ij}g_{jk}=\ensuremath{\text{id}}\)</span>, which is supplied by the flatness structure. There is also a 3-cell filling the interior of this prism, mapping the back face plus the left triangle filler to the front face plus the right triangle filler. These two faces both consist of one or two identities concatenated with the flatness structure, and so the 3-cell is definitional.</p>
<p>This relationship between flatness structure and local triviality of a chart can be compared to the classical result that on a paracompact, simply connected manifold (such as a single chart), a connection on a principal bundle is flat if and only if the bundle is trivial. See for example <span class="citation" data-cites="kobayashinomizu"> (<a href="#ref-kobayashinomizu" role="doc-biblioref">Kobayashi &amp; Nomizu, 1963</a>)</span> Corollary 9.2.</p>
<h2 data-number="4.3" id="the-tangent-bundle-of-the-sphere"><span class="header-section-number">4.3</span> The tangent bundle of the sphere</h2>
<p>We will build up a map <span class="math inline">\(T\)</span> out of <span class="math inline">\(\ensuremath{\mathbb{O}}_0\to\ensuremath{\mathbb{O}}_1\to\ensuremath{\mathbb{O}}\)</span> which is meant to be a model of the tangent bundle of the sphere. The link function will serve as our approximation to the tangent space. Taking the link of a vertex gives us a map from vertices to polygons, so the codomain is <span class="math inline">\(\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span>.</p>
<div class="mydef">
<p><strong>Definition 26</strong>. <em><span class="math inline">\(T_0\stackrel{\mathrm{def}}{=}\mathop{\mathrm{\mathsf{link}}}:\ensuremath{\mathbb{O}}_0\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> is given by: <span class="math display">\[\begin{aligned}
\mathop{\mathrm{\mathsf{link}}}(w) &amp;= \llbracket{brgo}\rrbracket_1 &amp; \mathop{\mathrm{\mathsf{link}}}(r) &amp;= \llbracket{wbyg}\rrbracket_1 \\
\mathop{\mathrm{\mathsf{link}}}(y) &amp;= \llbracket{bogr}\rrbracket_1 &amp; \mathop{\mathrm{\mathsf{link}}}(g) &amp;= \llbracket{wryo}\rrbracket_1 \\
\mathop{\mathrm{\mathsf{link}}}(b) &amp;= \llbracket{woyr}\rrbracket_1 &amp; \mathop{\mathrm{\mathsf{link}}}(o) &amp;= \llbracket{wgyb}\rrbracket_1
\end{aligned}\]</span> Recall that the double-brackets denote the realization via pushouts of the combinatorial data, and the subscript takes the bare type of maximal dimension, forgetting the cellular structure. So <span class="math inline">\(T_0\)</span> is a composition of a map into <span class="math inline">\(\mathsf{SimpCompSet_2}\)</span> follows by the realization map to <span class="math inline">\(\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span>.</em></p>
<p><em>We chose these orderings for the vertices in the link, by visualizing standing at the given vertex as if it were the north pole, then looking south and enumerating the link in clockwise order, starting from <span class="math inline">\(w\)</span> if possible, else <span class="math inline">\(b\)</span>.</em></p>
</div>
<figure id="fig:triangle_of_equators">
<img src="./5223124258db050f495250e281a65d462714f6df.svg" />
<img src="./f8ad0fbb66a7ad51b3cb4db7a0f35ea8a8a56a4b.svg" />
<img src="./d3b55304a407c9ca808e19bf9256206529608d82.svg" />
<figcaption><span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> for the vertices <span class="math inline">\(w, b\)</span> and <span class="math inline">\(r\)</span>.</figcaption>
</figure>
<p>To extend <span class="math inline">\(T_0\)</span> to a function <span class="math inline">\(T_1\)</span> on the 1-skeleton we have some freedom. We will do something motivated by the figures we have been drawing of an octahedron embedded in 3-dimensional space. We will imagine how <span class="math inline">\(T_1\)</span> changes as we slide from point to point in the embedding shown in the figures. Sliding from <span class="math inline">\(w\)</span> to <span class="math inline">\(b\)</span> and tipping the link as we go, we see <span class="math inline">\(r\mapsto r\)</span> and <span class="math inline">\(o\mapsto o\)</span> because those lie on the axis of rotation. Then <span class="math inline">\(g\mapsto w\)</span> and <span class="math inline">\(b\mapsto y\)</span>.</p>
<div class="mydef">
<p><strong>Definition 27</strong>. <em>Define <span class="math inline">\(T_1:\ensuremath{\mathbb{O}}_1\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> on just the 1-skeleton by extending <span class="math inline">\(T_0\)</span> as follows: Transport away from <span class="math inline">\(w\)</span>:</em></p>
<ul>
<li><p><em><span class="math inline">\(T_1(wr):\llbracket{brgo}\rrbracket_1\mapsto \llbracket{bygw}\rrbracket_1\)</span> (<span class="math inline">\(b, g\)</span> fixed)</em></p></li>
<li><p><em><span class="math inline">\(T_1(wg):\llbracket{brgo}\rrbracket_1\mapsto \llbracket{wryo}\rrbracket_1\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(wb):\llbracket{brgo}\rrbracket_1\mapsto \llbracket{yrwo}\rrbracket_1\)</span> (<span class="math inline">\(r, o\)</span> fixed)</em></p></li>
<li><p><em><span class="math inline">\(T_1(wo):\llbracket{brgo}\rrbracket_1\mapsto \llbracket{bwgy}\rrbracket_1\)</span></em></p></li>
</ul>
<p><em>Transport away from <span class="math inline">\(y\)</span>:</em></p>
<ul>
<li><p><em><span class="math inline">\(T_1(yb):\llbracket{bogr}\rrbracket_1\mapsto \llbracket{woyr}\rrbracket_1\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(yr):\llbracket{bogr}\rrbracket_1\mapsto \llbracket{bygw}\rrbracket_1\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(yg):\llbracket{bogr}\rrbracket_1\mapsto \llbracket{yowr}\rrbracket_1\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(yo):\llbracket{bogr}\rrbracket_1\mapsto \llbracket{bwgy}\rrbracket_1\)</span></em></p></li>
</ul>
<p><em>Transport along the equator:</em></p>
<ul>
<li><p><em><span class="math inline">\(T_1(br):\llbracket{woyr}\rrbracket_1\mapsto \llbracket{wbyg}\rrbracket_1\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(rg):\llbracket{wbyg}\rrbracket_1\mapsto \llbracket{wryo}\rrbracket_1\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(go):\llbracket{wryo}\rrbracket_1\mapsto \llbracket{wgyb}\rrbracket_1\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_1(ob):\llbracket{wgyb}\rrbracket_1\mapsto \llbracket{woyr}\rrbracket_1\)</span></em></p></li>
</ul>
</div>
<p>It’s very important to be able to visualize what <span class="math inline">\(T_1\)</span> does to triangular paths such as <span class="math inline">\(wb\cdot br\cdot rw\)</span> (which circulates around the boundary of face <span class="math inline">\(wbr\)</span>). You can see it if you imagine Figure <a href="#fig:triangle_of_equators" data-reference-type="ref" data-reference="fig:triangle_of_equators">6</a> as the frames of a short movie. Or you can place your palm over the top of a cube and note where your fingers are pointing, then slide your hand to an equatorial face, then along the equator, then back to the top. The answer is: you come back rotated clockwise by a quarter-turn, which we saw in Definition <a href="#def:rotation" data-reference-type="ref" data-reference="def:rotation">20</a> where it is called <span class="math inline">\(\llbracket{R}\rrbracket\)</span>.</p>
<p>Now let’s extend <span class="math inline">\(T_1\)</span> to all of <span class="math inline">\(\ensuremath{\mathbb{O}}\)</span> by providing values for the eight faces. The face <span class="math inline">\(wbr\)</span> is a path from <span class="math inline">\(\ensuremath{\mathsf{refl}}_w\)</span> to the concatenation <span class="math inline">\(wb\cdot br\cdot rw\)</span>, and so the image of <span class="math inline">\(wbr\)</span> under the extended version of <span class="math inline">\(T_1\)</span> must be a homotopy from <span class="math inline">\(\ensuremath{\mathsf{refl}}_{T_1(w)}\)</span> to <span class="math inline">\(T_1(wb\cdot br\cdot rw)\)</span>. Here <em>there is no additional freedom</em>.</p>
<div id="def:octahedron_curvature" class="mydef">
<p><strong>Definition 28</strong>. <em>Define <span class="math inline">\(T_2:\ensuremath{\mathbb{O}}\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> by extending <span class="math inline">\(T_1\)</span> to the faces as follows (making use of <span class="math inline">\(H_R\)</span> from Lemma <a href="#lem:rotation" data-reference-type="ref" data-reference="lem:rotation">21</a>):</em></p>
<div class="multicols">
<p><em><span>2</span></em></p>
<ul>
<li><p><em><span class="math inline">\(T_2(wbr)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(wrg)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(wgo)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(ybo)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(yrb)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(ygr)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(yog)=H_R\)</span></em></p></li>
<li><p><em><span class="math inline">\(T_2(ybo)=H_R\)</span></em></p></li>
</ul>
</div>
<p><em>Defining these flatness structures suffices to define <span class="math inline">\(T_2\)</span> by Lemma <a href="#lem:extend_faces" data-reference-type="ref" data-reference="lem:extend_faces">25</a>.</em></p>
</div>
<h2 data-number="4.4" id="existence-of-connections"><span class="header-section-number">4.4</span> Existence of connections</h2>
<p>How confident can we be that we can always define a connection on an arbitrary combinatorial manifold? Two things make the octahedron example special: the link is a 4-gon at every vertex (as opposed to having a variable number of vertices), and every transport map extends to a rotation of the entire octahedron in 3-dimensional space. This imposed a coherence on the interactions of all the choices we made for the connection, which we can worry may not exist for more complex combinatorial data.</p>
<p>We know as a fact outside of HoTT that any combinatorial surface that has been realized as a triangulated surface embedded in 3-dimensional euclidean space can inherit the parallel transport entailed in the embedding. We could then approximate that data to arbitrary precision with enough subdivision of the fibers of <span class="math inline">\(T\)</span>.</p>
<p>What would a proof inside of HoTT look like? We will leave this as an open question.</p>
<h1 data-number="5" id="sec:vector_fields"><span class="header-section-number">5</span> Vector fields</h1>
<h2 data-number="5.1" id="definition"><span class="header-section-number">5.1</span> Definition</h2>
<p>Vector fields are sections of the tangent bundle of a manifold. We do not have a general theory of tangent bundles, even for 2-dimensional cellular types, since we cannot yet prove that connections always exist on the 1-skeleton. But <em>given</em> an extension <span class="math inline">\(T\)</span> of the <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> function, we can consider the type of sections <span class="math inline">\(\prod_{x:\ensuremath{\mathbb{M}}_1}T_1(x)\)</span>.</p>
<div class="mydef">
<p><strong>Definition 29</strong>. <em>A <strong>vector field</strong> on a higher combinatorial 2-manifold <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span> equipped with type family <span class="math inline">\(T:\ensuremath{\mathbb{M}}\to\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span> that extends <span class="math inline">\(\mathop{\mathrm{\mathsf{link}}}\)</span> is a term <span class="math inline">\(X:\prod_{x:\ensuremath{\mathbb{M}}_1}T_1(x)\)</span>. It may be possible to extend <span class="math inline">\(X\)</span> to one or more faces of <span class="math inline">\(\ensuremath{\mathbb{M}}\)</span>, but we call faces for which <span class="math inline">\(X\)</span> cannot be extended <strong>zeros of the vector field</strong>.</em></p>
</div>
<div class="mynote">
<p><strong>Remark 30</strong>. <em>A section <span class="math inline">\(\prod_{x:\ensuremath{\mathbb{M}}}T(x)\)</span> for <span class="math inline">\(T:\ensuremath{\mathbb{M}}\to\mathrm{K}(\ensuremath{\mathbb{Z}},2)\)</span> is a trivialization of the bundle. The fact that an orientation suffices to factor the tangent bundle of a 2-manifold (which <em>a priori</em> maps to <span class="math inline">\(\mathrm{EM}(\ensuremath{\mathbb{Z}},1)\)</span>) through a principal bundle classifier is special to dimension 2. For higher dimensional manifolds the tangent bundle is a bundle of spheres, and even if the bundle is oriented it is not necessarily a principal bundle. On the other hand, the <span class="math inline">\(n\)</span>-truncation modal operator maps the type of <span class="math inline">\(n\)</span>-spheres to the classifying space <span class="math inline">\(\mathrm{K}(\ensuremath{\mathbb{Z}},n)\)</span>, and so another way to phrase this remark is that <span class="math inline">\(S^1\)</span> is the only <span class="math inline">\(n\)</span>-sphere which is <span class="math inline">\(n\)</span>-truncated.</em></p>
</div>
<p>On the 0-skeleton <span class="math inline">\(X\)</span> picks a point in each link, i.e. a neighbor of each vertex. On a path <span class="math inline">\(p:x=_\ensuremath{\mathbb{M}}y\)</span>, <span class="math inline">\(X\)</span> assigns a dependent path over <span class="math inline">\(p\)</span>, which as we know is a term <span class="math inline">\(\pi:\mathsf{tr}(p)(X(x))=_{T y} X(y)\)</span>. We are very interested in working with the concatenation operation on dependent paths, which we call <em>swirling</em>.</p>
<h2 data-number="5.2" id="swirling"><span class="header-section-number">5.2</span> Swirling</h2>
<p>Consider the vertex <span class="math inline">\(v_1:\ensuremath{\mathbb{M}}\)</span>, a face <span class="math inline">\(F\)</span> containing vertices <span class="math inline">\(v_1, v_2, v_3\)</span>, and the boundary path <span class="math inline">\(\ell\stackrel{\mathrm{def}}{=}e_{12}\cdot e_{23} \cdot e_{31}\)</span>. For brevity, denote <span class="math inline">\(T(v_i)\)</span> by <span class="math inline">\(T_i\)</span> and <span class="math inline">\(T(e_{ij})\)</span> by <span class="math inline">\(T_{ji}\)</span>. The indices are swapped so that we can have expressions that respect function-composition order, such as <span class="math inline">\(T_{32}T_{21}(X_1):T_3\)</span>. Figure <a href="#fig:vector_transport" data-reference-type="ref" data-reference="fig:vector_transport">7</a> shows in tabular form how we concatenate the dependent paths over <span class="math inline">\(e_{12}\cdot e_{23}\cdot e_{31}\)</span>. Figure <a href="#fig:swirling" data-reference-type="ref" data-reference="fig:swirling">8</a> shows visually a possible example.</p>
<figure id="fig:vector_transport">
<img src="./bb11f9f39e0f1c386aa31e3fb73ab12874800ec0.svg" />
<figcaption>The data in each fiber as we move around a triangle with vertices indexed 1, 2, and 3. Double-lines indicate identity types between two types, and their labels are terms of this type. Items with one index are terms of some type at a vertex, and items with two indices are terms of a type on an edge.</figcaption>
</figure>
<p>As we traverse an edge, say <span class="math inline">\(e_{12}\)</span>, we get a path in <span class="math inline">\(T_2\)</span> which is the image of <span class="math inline">\(e_{12}\)</span> under <span class="math inline">\(X\)</span>, denoted <span class="math inline">\(X_{12}\)</span>. As we traverse an additional edge, <span class="math inline">\(X_{12}\)</span> is simply mapped to the next vertex by transport. The image is carried first to <span class="math inline">\(T_{32}(X_{12})\)</span> then to <span class="math inline">\(T_{13}\circ T_{32}(X_{12})\)</span>.</p>
<figure id="fig:swirling">
<img src="./2dec3ebe9d458b88716d7dd7516f8eee376f0102.svg" />
<figcaption>A vector field swirling around a face, in a bundle of squares. Imagine that transport along <span class="math inline">\(e_{12}\)</span> does not rotate along the page, that transport along <span class="math inline">\(e_{23}\)</span> rotates counterclockwise by 90 degrees, and that transport along <span class="math inline">\(e_{31}\)</span> again does not rotate along the page. Thick black vectors are the vector field at a point. Thin vectors are transported once, dashed twice, and dotted three times. The vertices <span class="math inline">\(v_{ij}\)</span> are in the tangent fibers. If you see color, the colors of the arrows correspond: the red edge produced the red edge in the fibers.</figcaption>
</figure>
<p>We wish to simplify expressions such as <span class="math inline">\(T_{13}T_{32}X_{12}\cdot T_{13}X_{23}\cdot X_{31}\)</span>, which take place in a particular fiber (<span class="math inline">\(T_1\)</span> in this case), and which depend on arranging for the endpoint of one segment to agree with the start of another. The simplification will empower us to easily perform calculations over the whole manifold, and to prove our main theorem <a href="#thm:total_index_total_curvature" data-reference-type="ref" data-reference="thm:total_index_total_curvature">[thm:total_index_total_curvature]</a>.</p>
<p>First we will choose a specific group that acts on all the fibers of <span class="math inline">\(T\)</span>. Fix a point <span class="math inline">\(m:\ensuremath{\mathbb{M}}\)</span>, and recall the map <span class="math inline">\(\tau:\prod_{x:M}((Tx=Tx)\xrightarrow[]{\simeq}(Tm=Tm))\)</span> from Lemma <a href="#lem:gauge_triv" data-reference-type="ref" data-reference="lem:gauge_triv">10</a>. This map is a trivialization of the automorphism bundle, so in particular provides an action of <span class="math inline">\(Tm=Tm\)</span> on each <span class="math inline">\(Tx\)</span> (or in our case <span class="math inline">\(T_i\)</span>). Denote the action of <span class="math inline">\(Tm=Tm\)</span> on the torsor <span class="math inline">\(T_i\)</span> by <span class="math inline">\(\alpha:(Tm=Tm)\times T_i\to T_i\)</span>. This induces an equivalence <span class="math inline">\((\alpha, \ensuremath{\mathrm{pr}}_2):(Tm=Tm)\times T_i\stackrel{\sim}{\to}T_i\times T_i\)</span>.</p>
<div class="mydef">
<p><strong>Definition 31</strong>. <em>The map <span class="math inline">\(\ensuremath{\mathrm{pr}}_1\circ (\alpha, \ensuremath{\mathrm{pr}}_2)^{-1}:T_i\times T_i\to (Tm=Tm)\)</span> is called <strong>subtraction</strong>. It maps <span class="math inline">\((x,y)\)</span> to the unique term <span class="math inline">\(\delta:Tm=Tm\)</span> such that <span class="math inline">\(\alpha(\delta, x)=y\)</span>. For brevity we denote <span class="math inline">\(\ensuremath{\mathrm{pr}}_1\circ (\alpha, \ensuremath{\mathrm{pr}}_2)^{-1}(x,y)\)</span> by <span class="math inline">\(y-x\)</span>.</em></p>
</div>
<p>Each fiber <span class="math inline">\(T_i\)</span> is pointed by <span class="math inline">\(X_i\)</span>, so we can define the map <span class="math inline">\(T_i\xrightarrow[]{-X_i}(Tm=Tm)\)</span>, and then give a name to the special term <span class="math inline">\(\rho_{ji}\stackrel{\mathrm{def}}{=}T_{ji}X_j - X_i\)</span> which is the image in <span class="math inline">\(Tm=Tm\)</span> of the vector <span class="math inline">\(X_j\)</span> in a neighboring vertex after transporting it to <span class="math inline">\(T_i\)</span>.</p>
<div class="mylemma">
<p><strong>Lemma 32</strong>. <em>The following diagram is well-typed and commutes, and therefore <span class="math inline">\(\rho_{ij}=-\rho_{ji}\)</span>.</em></p>
</div>
<p><img src="./e628c3cc68334435cf9cab6011d668c711e55b6d.svg" alt="image" /></p>
<p><em>Proof.</em> The top map has the given codomain because <span class="math inline">\(T_{ji}T_{ij}=\ensuremath{\text{id}}\)</span>. The upper-right composition is <span class="math inline">\(((\text{-})\cdot(T_{ji}(\text{-}))-X_j\)</span>, and the lower-left composition is <span class="math inline">\(((\text{-})-X_j)+(\rho_{ji}+((\text{-})-X_i))\)</span>, so commutativity follows from the definition of <span class="math inline">\(\rho_{ji}\)</span>. The final statement follows from comparing the types on the right. ◻</p>
<p>Given this fact we now know that <span class="math inline">\(-X_j\)</span> maps <span class="math inline">\(X_{ij}\cdot X_{ji}\)</span> to <span class="math inline">\(\ensuremath{\text{id}}=\ensuremath{\text{id}}\)</span>, and we can ask if the image is <span class="math inline">\(\ensuremath{\mathsf{refl}}\)</span>. We have <span class="math display">\[\begin{aligned}
{2}
-X_j(X_{ij}\cdot X_{ji}) &amp;= -X_j(X(e_{ji}\cdot e_{ij}))&amp;&amp;\quad\text{(by definition of dependent paths)}\\
&amp;= -X_j(X(\ensuremath{\mathsf{refl}}))&amp;&amp;\quad\text{}\\
&amp;= -X_j(\ensuremath{\mathsf{refl}})&amp;&amp;\quad\text{(by path induction)}\\
&amp;= \ensuremath{\mathsf{refl}}&amp;&amp;\quad\text{}
\end{aligned}\]</span></p>
<h2 class="unnumbered" id="an-example-vector-field-on-the-sphere">An example vector field on the sphere</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-christensen_univalence" class="csl-entry" role="listitem">
<span class="smallcaps">Christensen</span>, D. (2015) A characterization of univalent fibrations.
</div>
<div id="ref-hopf" class="csl-entry" role="listitem">
<span class="smallcaps">Hopf</span>, H. (1983) <a href="https://api.semanticscholar.org/CorpusID:117042538">Differential geometry in the large: Seminar lectures, new york university, 1946 and stanford university, 1956</a>.
</div>
<div id="ref-kirby_siebenmann" class="csl-entry" role="listitem">
<span class="smallcaps">Kirby</span>, R.C. &amp; <span class="smallcaps">Siebenmann</span>, L.C. (1977) <em>Foundational essays on topological manifolds, smoothings, and triangulations</em>, Annals of mathematics studies. Princeton University Press.
</div>
<div id="ref-kobayashinomizu" class="csl-entry" role="listitem">
<span class="smallcaps">Kobayashi</span>, S. &amp; <span class="smallcaps">Nomizu</span>, K. (1963) <em><a href="https://books.google.com/books?id=wn4pAQAAMAAJ">Foundations of differential geometry</a></em>, Foundations of differential geometry. Interscience Publishers.
</div>
<div id="ref-myersgood" class="csl-entry" role="listitem">
<span class="smallcaps">Myers</span>, D.J. (2022) <a href="https://arxiv.org/abs/1908.08034">Good fibrations through the modal prism</a>.
</div>
<div id="ref-needham" class="csl-entry" role="listitem">
<span class="smallcaps">Needham</span>, T. (2021) <em><a href="https://books.google.com/books?id=Mc0QEAAAQBAJ">Visual differential geometry and forms: A mathematical drama in five acts</a></em>. Princeton University Press.
</div>
<div id="ref-dcct" class="csl-entry" role="listitem">
<span class="smallcaps">Schreiber</span>, U. (2013) <a href="https://arxiv.org/abs/1310.7930v1">Differential cohomology in a cohesive infinity-topos</a>.
</div>
<div id="ref-sco" class="csl-entry" role="listitem">
<span class="smallcaps">Scoccola</span>, L. (2020) <a href="https://doi.org/10.1017/s0960129520000146">Nilpotent types and fracture squares in homotopy type theory</a>. <em>Mathematical Structures in Computer Science</em>, <strong>30</strong>, 511–544.
</div>
<div id="ref-talbott" class="csl-entry" role="listitem">
<span class="smallcaps">Talbott</span>, S. (1995) <em><a href="https://books.google.com/books?id=KcXaAAAAMAAJ">The future does not compute: Transcending the machines in our midst</a></em>. O’Reilly &amp; Associates.
</div>
<div id="ref-hottbook" class="csl-entry" role="listitem">
<span class="smallcaps">Univalent Foundations Program</span> (2013) <em>Homotopy type theory: Univalent foundations of mathematics</em>. Institute for Advanced Study: <a href="https://homotopytypetheory.org/book" class="uri">https://homotopytypetheory.org/book</a>.
</div>
<div id="ref-whitehead_triangulation" class="csl-entry" role="listitem">
<span class="smallcaps">Whitehead</span>, J.H.C. (1940) On <span><span class="math inline">\(C^1\)</span></span>-complexes. <em>Annals of Mathematics</em>, 809–824.
</div>
</div>
</body>
</html>
